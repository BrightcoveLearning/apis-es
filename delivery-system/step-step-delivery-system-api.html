---
title: 'Paso a paso: Delivery System API'
description: 'Este documento proporciona una introducción práctica al uso de la Delivery System API para crear un repositorio (repositorio), y en el repositorio guardará y actualizará un complemento.'
parent: Delivery System API 
grandparent: Home
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
    <summary>{{ page.description }}</summary>
    <section id="Overview" class="bcls-section">
        <h2>Descripción general</h2>

        <p>Estos son los pasos que realizará:</p>

        <ul>
            <li>Cree un repositorio con la Delivery System API</li>
            <li>Cree una carpeta local para el almacenamiento de archivos</li>
            <li>Crea un complemento y cópialo en el repositorio.</li>
            <li>Modifique el reproductor para usar el nuevo complemento</li>
            <li>Modifique el complemento y observe que el reproductor usa el complemento modificado</li>
        </ul>

        <p class="BCL-aside">Nota: Si es un usuario experimentado de Git, verá que algunas de las llamadas a la API realizan una funcionalidad equivalente que también puede hacer en Git. De hecho, algunas de las llamadas a la API de manipulación de archivos simplemente ejecutan comandos de Git.</p>
    </section>

    <section id="prerreqs" class="bcls-section">
        <h2>Prerrequisitos</h2>

        <div class="BCL-concept">
            <p>Para comenzar con estas instrucciones paso a paso, se asume que ha completado el <a href="/player-management/getting-started/step-step-player-management.html">Paso a paso: Gestión de reproductores</a>. Al completar dicha actividad, ha definido las siguientes variables de entorno en su sistema de línea de comandos:</p>

            <ul>
                <li>{account_id}</li>
                <li>$EMAIL</li>
                <li>{player_id}</li>
            </ul>
        </div>
    </section>

    <section id="createrepo" class="bcls-section">
        <h2>Crear repositorio</h2>

        <div class="BCL-concept">
            <p>Ahora utilizará la Delivery System API para crear un repositorio y copiar archivos en ese repositorio. Una vez que se crea el repositorio, también puede usar la API para enumerar repositorios, mostrar detalles de un repositorio, eliminar repositorios, etc., pero en muchos flujos de trabajo esto no es necesario.</p>

            <p>En una declaración curl para crear el nuevo repositorio, usará un HTTP <code translate="No">PUT</code> e incluya el nombre del nuevo repositorio en la URL. Ejecute esta declaración curl para crear un repositorio llamado <code translate="No">firstRepo</code>.</p>

            <pre class="line-numbers">
    <code class="language-bash" translate="No">curl \
      --user $EMAIL \
      --request PUT \
      https://repos.api.brightcove.com/v1/accounts/{account_id}/repos/firstRepo
    </code></pre>
            <!-- <code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="1-5"></code><br /> -->

            <p>Recibirá una respuesta confirmando la creación del repositorio. La respuesta mostrará: el nombre y la URL pública del repositorio.</p>

            <ul>
                <li>nombre: Nombre del repositorio</li>
                <li>public_url: La URL pública del repositorio</li>
                <li>repo_url: La URL del repositorio</li>
            </ul>

            <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "name": "firstRepo",
      "public_url": "http://players.brightcove.net/1507807800001/firstRepo",
      "repo_url": "https://repos.api.brightcove.com/v1/accounts/1507807800001/repos/firstRepo"
    }</code></pre>
            <!-- <code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="7-11"></code> -->
        </div>
    </section>

    <section id="connectrepofolder" class="bcls-section">
        <h2>Crear carpeta</h2>

        <div class="BCL-concept">
            <p>A continuación, debe crear una carpeta localmente en su máquina para almacenar los archivos asociados con su Brightcove Player. En una ubicación de su elección, cree la carpeta y luego mueva (<code translate="No">cd</code> ) en esa carpeta.</p>

            <pre class="line-numbers">
    <code class="language-bash" translate="No">mkdir firstRepo
    cd firstRepo</code></pre>
            <!-- <code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="13-14"></code><br /> -->
        </div>
    </section>

    <section id="createplugin" class="bcls-section">
        <h2>Crear complemento</h2>

        <p>Ahora creará un complemento en su carpeta para copiarlo al repositorio. Utilice el mismo complemento del paso a paso: Gestión de reproductores, excepto cambiar el texto que se muestra. Cree el archivo, pegue el texto de abajo en el archivo y luego guárdelo. Utilice el mismo nombre de archivo que se utilizó en el paso a paso: Gestión de reproductores, <code translate="No">first-plugin.js</code>.</p>

        <pre class="line-numbers">
    <code class="language-javascript" translate="No">videojs.registerPlugin('firstPlugin', function() {
      var player = this,
      overlay = document.createElement('p');
      overlay.className = 'vjs-overlay';
      overlay.innerHTML = "NEW TEXT!";
      player.el().appendChild(overlay);
    });</code></pre>
        <!-- <p><code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="19-25"></code></p> -->

        <p>Ahora copiará el archivo de complemento recién creado al repositorio. Utilice la siguiente instrucción cURL para realizar esta tarea.</p>

        <pre class="line-numbers">
    <code class="language-bash" translate="No">curl \
      --user $EMAIL \
      --form contents=@first-plugin.js \
      --request PUT \
      https://repos.api.brightcove.com/v1/accounts/{account_id}/repos/firstRepo/files/first-plugin.js</code></pre>
        <!-- <p><code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="113-117"></code></p> -->

        <p>Después de la copia, debería ver una confirmación similar a la siguiente:</p>

        <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "name": "first-plugin.js",
      "public_url": "http://players.brightcove.net/1507807800001/firstRepo/first-plugin.js"
    }</code></pre>
        <!-- <p><code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="119-122"></code></p> -->

        <p>Puede confirmar que el archivo se copió correctamente viendo su contenido usando la siguiente instrucción cURL.</p>

        <pre class="line-numbers">
    <code class="language-bash" translate="No">curl http://players.brightcove.net/{account_id}/firstRepo/first-plugin.js</code></pre>
        <!-- <p><code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="125"></code></p> -->

        <p>También puede ver el archivo navegando por el <code translate="No">public_url</code> devuelto de la copia del archivo.</p>

        <aside class="bcls-aside bcls-aside--information">Si está realizando cambios en su complemento, puede haber una demora en ver los resultados, ya que todos los archivos alojados a través de la Delivery System API están sujetos a un almacenamiento en caché de cinco minutos. Esto significa que pueden pasar hasta cinco minutos antes de que se lea y utilice su complemento. Si esta es su prueba inicial, no habrá demora.</aside>
    </section>

    <section id="usenewplugin" class="bcls-section">
        <h2>Usar nuevo complemento</h2>

        <div class="BCL-concept">
            <p>En el paso a paso: Gestión del reproductor usó una declaración curl para decirle al reproductor la ubicación del código JavaScript para el complemento, junto con la ubicación de CSS y el nombre del complemento. Hará lo mismo nuevamente, excepto que esta vez la ruta al complemento utilizará la nueva ruta que se encuentra en la respuesta de la copia del archivo (que se muestra en la línea 2 anterior en la respuesta de la copia). Ejecute la siguiente instrucción curl para apuntar a la nueva ubicación del complemento.</p>

            <aside class="bcls-aside bcls-aside--information">Nota: Incluso si no está proporcionando ninguna opción, debe ingresar el nombre del complemento, como se muestra aquí.</aside>

            <pre class="line-numbers">
    <code class="language-bash" translate="No">curl \
      --header "Content-Type: application/json" \
      --user $EMAIL \
      --request PATCH \
      --data '{
        "scripts": [
          "http://players.brightcove.net/{account_id}/firstRepo/first-plugin.js"
        ],
        "stylesheets": [
          "http://solutions.brightcove.com/bcls/video-js/new-player/first-plugin.css"
        ],
        "plugins": [{
          "name": "firstPlugin"
        }]
      }' \
      https://players.api.brightcove.com/v2/accounts/{account_id}/players/{player_id}/configuration</code></pre>
            <!-- <code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="50-65"></code><br /> -->

            <aside class="bcls-aside bcls-aside--tip">Es una buena práctica mantener también sus archivos CSS en un repositorio. Esto no se hizo en este caso por simplicidad. Además, podría haber actualizado solo el <code translate="No">scripts</code> sección en el <code translate="No">data</code> parte de la declaración curl, ya que es la única sección que se cambia. Para revisar, el <code translate="No">scripts</code> , <code translate="No">stylesheets</code> y <code translate="No">plugins</code> Se actualizaron las secciones.</aside>

            <p>Usa el devuelto <code translate="No">preview_url</code> para navegar por el reproductor y verá el nuevo texto del complemento que se muestra. Si lo desea, también puede publicar el reproductor y obtener la URL del reproductor publicado.</p>
        </div>
    </section>

    <section id="alterplugin" class="bcls-section">
        <h2>Modificar complemento</h2>

        <div class="BCL-concept">
            <p>Uno de los puntos fuertes de usar el nuevo reproductor de Brightcove es la facilidad para actualizar los reproductores al realizar un solo cambio en un complemento, y todos los reproductores que usen ese complemento se actualizarán. En este punto de los pasos, realizará un pequeño cambio en el complemento y lo verá en uso sin realizar ningún cambio en el reproductor.</p>

            <p>Abre el <code translate="No">first-plugin.js</code> archivo y actualice el texto para leer <strong>¡Texto más nuevo!</strong></p>

            <pre class="line-numbers">
    <code class="language-javascript" translate="No">overlay.innerHTML = "NEWer TEXT!";</code></pre>
            <!-- <code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="68"></code><br /> -->

            <p>Vuelva a copiar el archivo al repositorio.</p>

            <pre class="line-numbers">
    <code class="language-bash" translate="No">curl \
      --user $EMAIL \
      --form contents=@first-plugin.js \
      --request PUT \
      https://repos.api.brightcove.com/v1/accounts/{account_id}/repos/firstRepo/files/first-plugin.js</code></pre>
            <!-- <p><code data-gist-id="8939637" data-gist-hide-footer="true" data-gist-line="113-117"></code></p> -->

            <p>Navega lo mismo <code translate="No">preview_url</code> desde arriba de nuevo. Nota: Debido al almacenamiento en caché del navegador, es posible que deba cerrar la pestaña del navegador y navegar de nuevo, o incluso borrar el caché del navegador para ver el texto actualizado.</p>

            <p>Una vez que vea que funciona la última versión del complemento, puede publicar su reproductor.</p>
        </div>
    </section>
</article>