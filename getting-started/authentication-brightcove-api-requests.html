---
title: 'Autenticación para solicitudes de API'
description: 'Este tema cubre la autenticación para la solicitud a las API REST de Brightcove.'
parent: General 
grandparent: Home
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Introduction">Introducción</h2>

    <p>La mayoría de las API REST de Brightcove utilizan OAuth2 como base para la autenticación, y veremos la implementación de OAuth con más detalle en las secciones siguientes.</p>

    <p>Primero, sin embargo, tenga en cuenta que dos API utilizan diferentes enfoques para la autenticación:</p>

    <section class="bcls-subsection">
      <h3 id="policy_key">Autenticación de clave de política: Playback API</h3>

      <p>La API de <a href="/playback/index.html">reproducción</a> utilizada principalmente para recuperar datos de vídeos y listas de reproducción de reproductores o portales web, utiliza un <code translate="No">policy_key</code>, para la autenticación, generalmente se pasa como argumento en un <code translate="No">Accept</code> encabezado:</p>

      <pre>
        <code class="language-http" translate="No">Accept: application/json;pk={policy_key}</code></pre>

      <p>Las claves de política se generan automáticamente para los reproductores de Brightcove y se pueden tomar de un <a href="/policy/getting-started/policy-keys.html#Getting_the_policy_key">configuración del reproductor</a> , o generado usando el <a href="/policy/index.html">Policy API</a></p>
    </section>

    <section class="bcls-subsection">
      <h3 id="authentication_api_key">Autenticación de clave API: Live API</h3>

      <p>La <a href="https://live.support.brightcove.com/live-api/">Live API</a> utiliza una clave de API que se proporciona cuando su cuenta está configurada para autenticar solicitudes. La clave de API se pasa en un <code translate="No">X-API-KEY</code> encabezamiento:</p>

      <pre>
        <code class="language-http" translate="No">X-API-KEY : {YOUR_APIKey}</code></pre>
    </section>
  </section>

  <section class="bcls-section">
    <h2 id="oauth2_authentication">Autenticación OAuth2</h2>

    <p>Las otras API REST para Video Cloud usan OAuth2 para la autenticación. Para aquellos familiarizados con OAuth2, usamos un flujo de credenciales de cliente. Hay dos operaciones involucradas:</p>

    <ol>
      <li><strong>Obtenga las credenciales del cliente:</strong> Esta es una operación que se realiza una sola vez y que se lleva a cabo más fácilmente <strong>Autenticación API</strong> página de las herramientas de administración en Studio. Ver <a href="/general/managing-api-authentication-credentials.html">Administrar las credenciales de autenticación de API</a> para obtener detalles e instrucciones paso a paso.</li>
      <li><strong>Obtenga un token de acceso:</strong> cada solicitud de API debe contener un token de acceso enviado en un <code translate="No">Authorization</code> encabezamiento:
        <pre>
        <code class="language-http" translate="No">Authorization: Bearer {access_token}</code></pre>

        <p>Los tokens de acceso están activos durante cinco minutos, por lo que, a menos que ejecute un proceso que generará solicitudes de API repetidas, probablemente solo querrá obtener una nueva para cada solicitud.</p>

        <p>Los tokens de acceso se obtienen enviando las credenciales del cliente en una solicitud a la API OAuth de Brightcove. Ver <a href="/oauth/guides/getting-access-tokens.html">Obtener tokens de acceso</a> para conocer todos los detalles. También hay una <a href="/oauth/code-samples/oauth-api-sample-get-access-token.html">aplicación de muestra</a> que puede utilizar para obtener un token único para probar las llamadas a la API. También hay instrucciones para configurar los clientes REST más populares. <a href="/general/use-postman-api-requests.html">Cartero</a> y <a href="/general/use-insomnia-api-requests.html">Insomnio</a>.</p>
      </li>
    </ol>
  </section>
  <section class="bcls-section" id="stepsGetCredentials">
    <h2>Credenciales de cliente a través de la OAuth API</h2>

    <p>Si desea o necesita crear credenciales de cliente utilizando la OAuth API, a continuación se muestran los pasos que lo guiarán para obtener sus credenciales de cliente. Primero deberá obtener su BC_TOKEN, que se utiliza para autenticarlo para la solicitud de credenciales del cliente.</p>

    <h3>Conseguir su <code translate="No">BC_TOKEN</code> y número de cuenta</h3>

    <p>Deberá iniciar sesión en Studio para obtener su <code translate="No">BC_TOKEN</code>.</p>

    <ol class="bcls-tasklist">
      <li>Inicie sesión en Studio como lo hace normalmente.</li>
      <li>Necesita su número de cuenta (denominado ID de editor en Studio), que puede obtener yendo a la información de su cuenta en Studio:
        <figure class="bcls-figure"><img class="bcls-image" alt="Account ID" src="/assets/images/getting-started/account-info-studio.png" />
          <figcaption class="bcls-caption--image">ID de la cuenta</figcaption>
        </figure>
      </li>
      <li>Con cualquier página de Studio abierta, abra las herramientas de desarrollo para el navegador, vaya a la Consola y pegue el siguiente código:
        <pre class="line-numbers">
      <code class="language-javascript" translate="No">var cookiesArray = document.cookie.split(";"), cookiesObj = {}, i, tmpArray = [];
      for (i = 0; i &lt; cookiesArray.length; i++) {
          tmpArray = cookiesArray[i].split("=");
          if (tmpArray[0].indexOf('BC_TOKEN') &gt; -1) {
              cookiesObj.BC_TOKEN = tmpArray[1];
          }
      }
      window.prompt("BC_TOKEN:", cookiesObj.BC_TOKEN);</code></pre>

        <p>... y presione regresar.</p>
      </li>
      <li>Debería ver aparecer un mensaje que contiene su <code translate="No">BC_TOKEN</code>:
        <figure class="bcls-figure"><img class="bcls-image" alt="BC_TOKEN" src="/assets/images/getting-started/prompt-with-token-safari.png" />
          <figcaption class="bcls-caption--image">BC_TOKEN</figcaption>
        </figure>
      </li>
      <li>Si tiene su BC_TOKEN, vaya a la <a href="#getCredentials">Obtenga las credenciales del cliente</a> sección; Si por alguna razón no obtuvo su BC_TOKEN siguiendo los pasos anteriores, simplemente vaya a la Consola, escriba <code translate="No">document.cookies</code> y presione regresar.</li>
      <li>Todas las cookies de la página se devolverán en una lista separada por punto y coma. Busque la cookie BC_TOKEN en la lista y copie el valor:
        <figure class="bcls-figure"><img class="bcls-image" alt="Get BC_TOKEN from Console" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/ingest-profiles-api/guides/get-access-token-console.png" />
          <figcaption class="bcls-caption--image">Obtener BC_TOKEN desde la consola</figcaption>
        </figure>
      </li>
    </ol>

    <h3 id="getCredentials">Obtener <code translate="No">client_credentials</code></h3>

    <p>Ahora estamos listos para realizar la llamada al servicio OAuth para recuperar las credenciales del cliente. Tenemos que especificar un nombre de aplicación cliente para el que estamos solicitando credenciales (el nombre es arbitrario, con la intención de ayudarlo a realizar un seguimiento de para qué son las credenciales) y aquí usaremos "ingest-profiles-api-client". También tenemos que especificar el alcance de las operaciones a las que queremos acceder en una matriz, y aquí usaremos. Las operaciones disponibles se muestran en <a href="/oauth/guides/api-operations-client-credentials-requests.html">Operaciones de API para solicitudes de credenciales de cliente</a>. En los pasos siguientes, especificará las operaciones necesarias para la API de perfiles de ingesta.</p>

    <ol class="bcls-tasklist">
      <li>Edite el siguiente comando curl, luego péguelo en la línea de comando y presione <strong>Regreso</strong>. Debe proporcionar sus valores específicos para los siguientes tres valores:

        <ul>
          <li><em><strong>tu BC_TOKEN</strong></em></li>
          <li><em><strong>su nombre de credencial</strong></em></li>
          <li><em><strong>su identificación de cuenta</strong></em></li>
        </ul>

        <pre class="line-numbers">
      <code class="language-bash" translate="No">curl \
        --include \
        --header "Authorization: BC_TOKEN <em><strong>your_BC_TOKEN</strong></em>" \
        --data 'name=ingest-profiles-api-client&amp;maximum_scope=[{
            "identity": {
              "type": "video-cloud-account",
              "account-id": <em><strong>your_account_id</strong></em>
            },
            "operations": [
                  "video-cloud/ingest-profiles/profile/read",
                  "video-cloud/ingest-profiles/profile/write",
                  "video-cloud/ingest-profiles/account/read",
                  "video-cloud/ingest-profiles/account/write"
              ]
          }]' \
      https://oauth.brightcove.com/v4/client_credentials</code></pre>
      </li>
      <li>La respuesta debería verse así (formato agregado):
        <pre class="line-numbers">
      <code class="language-json" translate="No">{
        "redirect_url": null,
        "maximum_scope": [
          {
            "identity": {
              "type": "video-cloud-account",
              "account-id": your_video_cloud_account_id
            },
            "operations": [
              "video-cloud/ingest-profiles/profile/write",
              "video-cloud/ingest-profiles/account/write",
              "video-cloud/ingest-profiles/profile/read",
              "video-cloud/ingest-profiles/account/read"
            ]
          }
        ],
        "name_html": "ingest-profiles-api-client",
        "issued_to": "your_email@host.com",
        "trusted": null,
        "expires_at": null,
        "issued_at": "2015-06-01T15:09:00Z",
        "name": "ingest-profiles-api-client",
        "description_html": null,
        "revoked": null,
        "type": "credential",
        "client_secret": "Ifckr6cWtxOh_NZnEVhKCgcqZaqoMcPuoJ-VGuivIE_psPoPUt2hGqUK15uPON3x3m748ElazZoOKPxbI3-4nQ",
        "description": null,
        "client_id": "da270d86-f3cd-4ee6-85b0-047df97a0db2",
        "issued_user": your_video_cloud_account_id
      }</code></pre>
      </li>
      <li>Copie y guarde el <code translate="No">client_id</code> y <code translate="No">client_secret</code> , ya que los necesitará cada vez que necesite obtener un <code translate="No">access_token</code>.</li>
    </ol>
  </section>

  <section class="bcls-section" id="accessToken">
    <h2>Tokens de acceso a través de la OAuth API</h2>

    <p>Los tokens de acceso, a diferencia de las credenciales de cliente, son de corta duración; actualmente caducan en 5 minutos. Deberá obtener uno nuevo para cada solicitud de API. Por supuesto, podría crear lógica en una aplicación para verificar el token de acceso más reciente para ver si se agotó el tiempo de espera, pero es probable que las solicitudes a la API de Ingest Profiles sean pocas y distantes entre sí, por lo que no hay una buena razón para hacerlo. .</p>

    <p>De hecho, la API puede ser una que utilice con poca frecuencia como para que no valga la pena crear una aplicación a su alrededor. Una alternativa sería utilizar <a href="/assets/downloads/api-tester.sh.zip">este script de shell</a> que construyó Brightcove Learning Services. Le permite ingresar su identificación y secreto de cliente, la solicitud y el método de la API, y cualquier información de solicitud. Entonces obtiene un <code translate="No">access_token</code> , realiza la solicitud de API y genera la respuesta. (Tenga en cuenta que el script de shell usa cURL, que se instala de forma nativa en Mac MacOS y otros sistemas Unix / Linux, o <a href="https://general.support.brightcove.com/developer/concepts-set-curl.html">se puede instalar en Windows</a>.</p>

    <p>Para recuperar tokens de acceso, realiza una solicitud POST a:</p>

    <pre class="line-numbers">
      <code class="language-http" translate="No">https://oauth.brightcove.com/v4/access_token</code></pre>

    <p>Debes pasar los siguientes encabezados con esta llamada:</p>

    <ul>
      <li><code translate="No">Content-Type: application/x-www-form-urlencoded</code></li>
      <li><code translate="No">Authorization: Basic {client_id}:{client_secret}</code></li>
    </ul>

    <p>La totalidad <code translate="No">{client_id}:{client_secret}</code> la cadena debe estar codificada en Base64 (curl automáticamente codificará en Base64 la cadena si la pasa como <code translate="No">--user</code> cartas credenciales; en otros idiomas, deberá manejar la codificación Base64 usted mismo).</p>

    <p>También debe enviar el siguiente par clave / valor como el cuerpo de la solicitud o como parámetro de URL:</p>

    <pre class="line-numbers">
      <code class="language-bash" translate="No">grant_type=client_credentials</code></pre>

    <p>La respuesta se verá así (bastante impresa aquí para facilitar la lectura):</p>

    <pre class="line-numbers">
      <code class="language-json" translate="No">{
          "access_token": <strong>"ANB7xKhiUZmwltVd3f1odcHHM9VAwg02kwmLwtZwHv3SxGCOWLUf5W4G7X22PRjmR9StvFUqzpVZ1suOfyfOigdi-rnohxyEaSSuZceeLw_9OBW7fXldOG05HEgkeK3N-DBZZZyilodmjA1JWZHbgI3IU7Rmz5IPGyi-sDxHN3KlOr1BDZlLZpXPdFPwEyb6idq-z8AL-blKTSMtNI3_fz3oNBisfrHGUv5tXHoQT4B7FYcvdrap16gTOO7_wNt1zmgLJiUHvyxZgsgBchm_AhohVL-AYgcfCbCR0v7d2hgI4ag35pnZNeujDiBLfnCFcVMlqQGq8UEVZrmU9a8y4pVAGih_EImmghqmSrkxLPYZ800-vIWX-lw"</strong>,
          "token_type": "Bearer",
          "expires_in": 300
      }</code></pre>

    <p>La <code translate="No">access_token</code> valor es lo que debe pasar en un <code translate="No">Authorization</code> encabezado con su llamada a la API en este formulario:</p>

    <pre class="line-numbers">
      <code class="language-bash" translate="No">Authorization: Bearer {access_token}</code></pre>

    <p>La <code translate="No">expired_in</code> valor es el número de segundos durante los que es válido el token de acceso.</p>

    <p>Para obtener más información y código de muestra, consulte <a href="/oauth/guides/getting-access-tokens.html">Obtener tokens de acceso</a></p>
  </section>
</article>