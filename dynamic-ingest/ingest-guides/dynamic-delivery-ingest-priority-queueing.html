---
title: 'Cola de prioridad de ingesta de entrega dinámica'
description: 'Este tema explica cómo usar la configuración de prioridad para optimizar el tiempo de transferencia de videos de alta prioridad.'

parent: 'Ingest Guides' 
grandparent: Dynamic Ingest API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="Introduction">Introducción</h2>
    
    <p>La ingesta de entrega dinámica ahora tiene una función llamada <strong>Cola de prioridad</strong> que permiten a los editores enviarnos trabajos de ingesta con una configuración de prioridad deseada para influir en el orden y la puntualidad de cuándo se procesará el trabajo.</p>
    
    <aside>
    <p>Tenga en cuenta que la cola de prioridad se aplica solo a las cuentas que están habilitadas <a href="/dynamic-ingest/getting-started/overview-dynamic-ingest-api-dynamic-delivery.html">Entrega dinámica</a>. No se puede usar en cuentas que usan el sistema de ingestión heredado.</p>
    
    </aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="how-dynamic-delivery-ingestion-currently-works">Cómo funciona la cola de ingestión de Dynamic Delivery</h2>
    
    <p>Con la cola de prioridad normal, Dynamic Delivery Ingestion tiene un límite de 100 trabajos activos por cuenta. Cuando se excede ese límite, el sistema de ingestión pondrá en cola solicitudes adicionales para procesarlas más tarde. El tamaño de la cola tiene un límite separado, y cuando se alcanza, rechazará la solicitud de transferencia al cliente (con un código de error 429). Cuando los trabajos terminan, se libera capacidad y los trabajos que están en cola se recogerán y procesarán uno a la vez, en el orden en que se recibieron.</p>
    
    <p>El estado del video en el <span translate="No">CMS API</span> no refleja que el trabajo estaba en cola; el estado será <code translate="No">pending </code> si el trabajo está en proceso o en cola.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="How_Priority_Queueing_affects_ingestion">Cómo afecta la cola de prioridad a la ingestión</h2>
    
    <p>La cola de prioridad permite al usuario agregar un <code translate="No">priority </code> bandera a una solicitud de ingesta. Los valores permitidos para <code translate="No">priority </code> están <code translate="No">low </code> y <code translate="No">normal </code>. Cualquier otro valor hará que la solicitud sea rechazada con un código de error 422. Cuando el usuario no especifica ninguna prioridad, el valor predeterminado de <code translate="No">normal </code> se utiliza. A continuación, se muestra una breve descripción de cómo Priority Queueing cambia la forma en que se procesan los trabajos desde la cola:</p>
    
    <ol>
      <li>Si no hay trabajos en cola y hay capacidad para ejecutar un trabajo, el trabajo se ejecuta inmediatamente. Esto se aplica tanto a los trabajos de prioridad baja como a los normales.</li>
      <li>Si no hay capacidad para ejecutar otro trabajo, el trabajo se pone en cola.</li>
      <li>Si hay trabajos en la cola, los nuevos trabajos también se colocan en la cola. Esto significa que un nuevo trabajo no puede comenzar antes que los trabajos en cola.</li>
      <li>Cuando hay capacidad para ejecutar otro trabajo y hay trabajos en cola, se toma un trabajo de la cola:
      <ul>
        <li>Si hay CUALQUIER trabajo con prioridad normal en la cola, se seleccionará el trabajo con prioridad normal más antiguo.</li>
        <li>Si NO hay trabajos de prioridad normal en la cola, se seleccionará el trabajo de prioridad baja más antiguo.</li>
      </ul>
      </li>
      <li>Los trabajos de prioridad normal y baja se tratan como <strong>mismo</strong> por cuántos trabajos en ejecución puede haber. El número total de trabajos que se procesan, cualquiera que sea su prioridad, está limitado a 100 por cuenta.</li>
      <li>Existen <strong>separar</strong> cuotas para la cantidad de trabajos normales y de baja prioridad que se pueden poner en cola.</li>
    </ol>
    </section>
    
    <section class="bcls-section">
    <h2 id="What_to_watch_out_for">De que estar atento</h2>
    
    <h3>Los detalles de la reproducción cambiaron después de enviar un trabajo</h3>
    
    <p>Cuando crea un trabajo de Ingesta dinámica, el sistema de Ingesta dinámica copia el perfil de ingesta especificado, y ese perfil <strong>Copiar</strong> se utilizará para el procesamiento incluso si el perfil se ha modificado desde que se envió el trabajo.</p>
    
    <p>Para trabajos de baja prioridad, donde el procesamiento podría retrasarse durante una cantidad de tiempo significativa en algunos casos, <strong>las representaciones especificadas en ese perfil podrían modificarse</strong> antes de que el trabajo se procese realmente. Si eso sucede, las representaciones utilizadas para procesar el video serán las <strong>NUEVO</strong> definición de esas entregas; no la definición de las versiones en el momento en que se envió el trabajo.</p>
    
    <p>Si quieres <strong>garantía</strong> obtienes las interpretaciones <strong>como se especificaron cuando se envió el trabajo</strong> , debe hacer copias de las representaciones y crear un nuevo perfil que haga referencia a esas representaciones copiadas y luego iniciar el proceso de ingestión. (Puede volver a codificar el video con el perfil actualizado si el video ya se ha colocado en Video Cloud. Recuerde que no puede volver a codificar el video hasta que se complete el procesamiento del trabajo original).</p>
    
    <h3>Carga del archivo de origen</h3>
    
    <p>La carga del archivo de origen eliminará los archivos en ese depósito de S3 después de 24 horas. Dado que es posible que los trabajos de baja prioridad no se procesen durante más de 24 horas en algunos casos, es posible que los archivos ya se hayan eliminado y, en ese caso, el procesamiento fallará. <strong>No recomendamos la ingestión de baja prioridad para la carga de archivos de origen.</strong>.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="sample_request">Solicitudes de muestra</h2>
    
    <p>A continuación, se muestra una muestra de un cuerpo de solicitud de ingesta con baja prioridad:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "master": {
    "url": "http://host/master.mp4"
    },
    "profile": "multi-platform-extended-static",
    <span class="bcls-highlight">"priority": "low"</span>,
    "callbacks": [
    "http://mydomain.com/di-callbacks.php"
    ]
    }
    </code>
    </pre>
    
    <p>Y aquí hay una muestra de un trabajo prioritario normal:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "master": {
    "url": "http://host/master.mp4"
    },
    "profile": "multi-platform-extended-static",
    <span class="bcls-highlight">"priority": "normal"</span>,
    "callbacks": [
    "http://mydomain.com/di-callbacks.php"
    ]
    }
    </code>
    </pre>
    
    <p>Tenga en cuenta que desde <code translate="No">normal </code> es el valor predeterminado, la solicitud anterior se procesará exactamente de la misma manera que la siguiente:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "master": {
    "url": "http://host/master.mp4"
    },
    "profile": "multi-platform-extended-static",
    "callbacks": [
    "http://mydomain.com/di-callbacks.php"
    ]
    }
    </code>
    </pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Using_the_priority_queue">Usando la cola de prioridad</h2>
    
    <p>Del último ejemplo de la sección anterior, debe quedar claro que si lo hace <strong>no</strong> utilizar el <code translate="No">priority </code> en sus trabajos de ingesta, continuarán procesándose exactamente como se han hecho.</p>
    
    <p>La adición de la <code translate="No">priority </code> campo le beneficiará principalmente si:</p>
    
    <ol>
      <li>Ingestas una cantidad bastante grande de videos</li>
      <li>Es fundamental conseguir <em>algunos</em> de sus videos en línea lo antes posible, mientras que no hay urgencia de publicar otros (porque el contenido es menos importante o no planea publicar los videos inmediatamente de todos modos)</li>
      <li>Tienes videos que quieres retranscodificar, pero no quieres que eso ralentice la ingestión de contenido nuevo.</li>
    </ol>
    </section>
    
    <section class="bcls-section">
    <h2 id="How_low_priority_queue_works">Cómo funciona la cola de baja prioridad</h2>
    
    <p>Esta sección explica cómo funciona la cola de baja prioridad.</p>
    
    <p>No hay garantía de cuándo se iniciarán los trabajos de prioridad normal o baja. Sin embargo, los trabajos de prioridad normal siempre se iniciarán antes que los de baja prioridad.</p>
    
    <p>Si tiene una tasa rápida y constante de envío de trabajos de prioridad normal, podría pasar un tiempo considerable antes de que se inicien los trabajos de prioridad baja.</p>
    
    <p>Los trabajos de baja prioridad pueden tardar más en comenzar y también en procesar que la prioridad normal para el mismo video.</p>
    </section>
    </article>
 