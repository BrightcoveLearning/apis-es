---
title: 'Código Python'
description: 'Este tema proporciona una secuencia de comandos de Python de muestra para la ingesta de un video mediante la API de ingesta dinámica.'

parent: 'Code Samples' 
grandparent: Dynamic Ingest API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="Introduction">Introducción</h2>
    
    <p>Las API REST, como las API de la plataforma Brightcove, se pueden utilizar con cualquier idioma. La secuencia de comandos de Python incluida aquí es solo una muestra para mostrarle cómo se agrupan las solicitudes. Hay otra muestra de una solicitud GET simple (para la CMS API) <a href="/cms/code-samples/cms-api-sample-python-code-get-request.html">aquí</a>.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="dependencies">Dependencias</h2>
    
    <ul>
      <li><a href="https://python.readthedocs.io/en/latest/">Peticiones</a></li>
    </ul>
    </section>
    
    <section class="bcls-section" id="script">
    <h2>Secuencia de comandos de Python</h2>
    
    <p>El siguiente código muestra el script. Tenga en cuenta que para usarlo, deberá proporcionar sus propios valores para lo siguiente:</p>
    
    <ul>
      <li>*** ID DE CUENTA AQUÍ **** (línea 8)</li>
      <li>*** ID DE CLIENTE AQUÍ **** (línea 9)</li>
      <li>*** CLIENTE SECRET AQUÍ **** (línea 10)</li>
      <li>*** TÍTULO DEL VIDEO AQUÍ *** (línea 27)</li>
      <li>*** URL FUENTE DEL VIDEO AQUÍ *** (línea 40)</li>
    </ul>
    
    <pre class="line-numbers">
    <code class="language-python" translate="No">#!/usr/bin/env python
    
    import sys
    import requests
    import json
    import argparse
    
    pub_id = "***ACCOUNT ID HERE****"
    client_id = "***CLIENT ID HERE****"
    client_secret = "***CLIENT SECRET HERE****"
    access_token_url = "https://oauth.brightcove.com/v4/access_token"
    profiles_base_url = "http://ingestion.api.brightcove.com/v1/accounts/{pubid}/profiles"
    
    def get_access_token():
        access_token = None
        r = requests.post(access_token_url, params="grant_type=client_credentials", auth=(client_id, client_secret), verify=False)
        if r.status_code == 200:
            access_token = r.json().get('access_token')
            print(access_token)
        return access_token
    
    def create_video():
        access_token = get_access_token()
        headers = { 'Authorization': 'Bearer ' + access_token, "Content-Type": "application/json" }
    
        url = ("https://cms.api.brightcove.com/v1/accounts/{pubid}/videos/").format(pubid=pub_id)
        data = '{"name": "***VIDEO TITLE HERE***"}'
        r = requests.post(url, headers=headers, data=data)
        return r.json()
    
    def submit_pbi(video_id):
        access_token = get_access_token()
        print access_token
        headers = { 'Authorization': 'Bearer ' + access_token, "Content-Type": "application/json" }
    
        url = ("https://ingest.api.brightcove.com/v1/accounts/{pubid}/videos/{videoid}/ingest-requests").format(pubid=pub_id, videoid=video_id)
        print url
    
        data = '''{
                "master": { "url": "****SOURCE VIDEO URL HERE***" }
             }'''
        r = requests.post(url, headers=headers, data=data)
        print r.headers
        return r.json()
    
    v = create_video()
    print v
    print submit_pbi(v['id'])</code></pre>
    </section>
    </article>
 