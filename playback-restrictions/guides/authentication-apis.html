---
title: 'Usar API de autenticación'
description: "En este tema, aprenderá acerca de las API que se utilizan para administrar la protección de claves / licencias cuando se utilizan las restricciones de reproducción de Brightcove."
parent: Guides 
grandparent: Playback Restrictions
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <!-- <br />
  <aside class="bcls-aside  bcls-aside--tip">
    This feature is available for a specific set of customers with access to the
    Limited Availability phase of the Playback Restrictions.
  </aside> -->

  <section class="bcls-section">
    <h2 id="Introduction">Introducción</h2>

    <p>
      Brightcove Playback Restrictions ofrece un nivel adicional de seguridad cuando se utiliza Dynamic Delivery con contenido protegido por DRM o HTTP Live Streaming Encryption (HLSe).
    </p>
    <p>Si no está familiarizado con esta función, consulte la <a href="/playback-restrictions/getting-started/overview-playback-restrictions.html">Descripción general: Restricciones de reproducción de Brightcove</a> documento.</p>

    <p>
      Estas son las API disponibles para administrar la protección de claves / licencias:
    </p>
    <ul>
      <li>
        <a href="#Register_public_key">Registrar clave pública</a>
      </li>
      <li>
        <a href="#Blacklist_tokens">Fichas de lista negra</a>
      </li>
      <li>
        <a href="#Audit_an_account">Auditar una cuenta</a>
      </li>
    </ul>
    <aside class="bcls-aside  bcls-aside--information"> Estas API solo son compatibles cuando se administra DRM mediante restricciones de reproducción. </aside>
  </section>

  <section class="bcls-section">
    <h2 id="Register_public_key">Registrar clave pública</h2>
    <p>Eres propietario de la clave privada y la usarás para generar tokens firmados. Compartirá la clave pública con Brightcove para verificar sus tokens. La API de claves le permite registrar su clave pública con Brightcove.</p>
    <h3>API clave</h3>
    <p>
      La API de claves se utiliza para administrar sus claves públicas con Brightcove.
    </p>

    <h3>URL base</h3>
    <p>
      La URL base de la API es:
    </p>
    <pre><code class="language-http" translate="No">https://playback-auth.api.brightcove.com</code></pre>

    <h3>Ruta de la cuenta</h3>
    <p>
      En todos los casos, se realizarán solicitudes para una cuenta de Video Cloud específica. Por lo tanto, siempre agregará el término cuentas seguido de la identificación de su cuenta a la URL base:
    </p>
    <pre><code class="language-http" translate="No">https://playback-auth.api.brightcove.com/v1/accounts/{accountID}</code></pre>

    <h3>Autorización</h3>
    <p>
      Se requiere un token de acceso para las solicitudes y debe estar presente en el encabezado de Autorización:
    </p>
    <pre><code class="language-http" translate="No">Authorization: Bearer {access_token}</code></pre>
    <p>
      El token de acceso es un token de acceso OAuth2 temporal que debe obtenerse del servicio Brightcove OAuth. Para obtener detalles sobre cómo obtener credenciales de cliente y usarlas para recuperar tokens de acceso, consulte la <a href="/oauth/getting-started/overview-oauth-api-v4.html">Descripción general de Brightcove OAuth</a>.
    </p>

    <h3>Permisos</h3>
    <p>
      Las solicitudes a la API clave deben realizarse desde <a href="/oauth/getting-started/overview-oauth-api-v4.html#Get_Client_Credentials">credenciales del cliente</a> con los siguientes permisos:
    </p>
    <ul>
      <li>
        <code translate="No">video-cloud/playback-auth/key/read</code>
      </li>
      <li>
        <code translate="No">video-cloud/playback-auth/key/write</code>
      </li>
    </ul>

    <h3>Administrar claves</h3>
    <p>
      La API clave admite las siguientes solicitudes:
    </p>
    <aside class="bcls-aside bcls-aside--information">
      <p>
        Notas:
      </p>
      <ul>
        <li>
          No es posible editar una clave existente, pero puede eliminar y crear una nueva.
        </li>
        <li>
          Se pueden registrar un máximo de 3 claves a la vez y las claves se pueden eliminar para admitir la rotación de claves. En la práctica, es mejor tener solo 1 clave.
        </li>
      </ul>
    </aside>

    <h3>Registre una nueva clave:</h3>
    <p>
      Pon el valor de tu clave pública en el cuerpo de la solicitud de API. Puede encontrar la clave en el <strong>public_key.txt</strong> expediente.
    </p>
    <h4>Solicitud de API</h4>
    <pre class="line-numbers"><code class="language-http" translate="No">POST /v1/accounts/{accountID}/keys
    Content-Type: application/json
    Body: {"value": "MFkwEwYHKoZIzj0CAQYIKoZIzj...MyeQviqploA=="}
</code></pre>
<details>
  <summary>
    <p id="Using_Curl">Usando Curl</p>
  </summary>
    <pre class="line-numbers"><code class="language-curl">curl -X POST \\ -H "Tipo de contenido: aplicación / json" \\ -H "Autorización: Portador {access_token} "\ -d '{"value": "{your_public_key_value}«}' \ https://playback-auth.api.brightcove.com/v1/accounts/{accountID}/keys </code></pre>
  </details>

    <h4>Respuesta de API</h4>
  <pre class="line-numbers"><code class="language-json" translate="No">{
    &quot;id&quot;: &quot;{your_public_key_id}&quot;,
    &quot;type&quot;: &quot;public&quot;,
    &quot;algorithm&quot;: &quot;rsa&quot;,
    &quot;value&quot;: &quot;{your_public_key_value}&quot;,
    &quot;createdAt&quot;: &quot;2020-01-03T20:30:36.488Z&quot;
  }</code></pre>
  
    <h3>Lista de claves:</h3>
    <p>
      Obtenga una lista de claves públicas en su cuenta.
    </p>
    <pre><code class="language-http" translate="No">GET /v1/accounts/{accountID}/keys</code></pre>

    <h3>Obtenga una clave:</h3>
    <p>
      Obtenga los detalles de una clave pública en su cuenta.
    </p>
    <pre><code class="language-http" translate="No">GET /v1/accounts/{accountID}/keys/{key_Id}</code></pre>

    <h3>Eliminar una clave:</h3>
    <p>
      Elimina una clave pública de tu cuenta.
    </p>
    <pre><code class="language-http" translate="No">DELETE /v1/accounts/{accountID}/keys/{key_Id}</code></pre>
  </section>

  <section class="bcls-section">
    <h2 id="Blacklist_tokens">Fichas de lista negra</h2>

    <p>
      Un token que se haya incluido en la lista negra no se considerará válido para solicitudes de licencia, incluso si de otro modo hubiera sido aprobado. Los clientes pueden incluir hasta 100 tokens en la lista negra. Si 100 tokens ya están en la lista negra, el cliente debe eliminar uno o más tokens para dejar espacio para entradas adicionales.
    </p>

    <h3>API de lista negra</h3>
    <p>
      La API de lista negra se utiliza para administrar sus tokens que están en la lista negra y se consideran no válidos para solicitudes de licencia.
    </p>

    <h3>URL base</h3>
    <p>
      La URL base de la API de lista negra es:
    </p>
    <pre><code class="language-http" translate="No">https://playback-auth.api.brightcove.com</code></pre>

    <h3>Ruta de la cuenta</h3>
    <p>
      En todos los casos, se realizarán solicitudes para una cuenta de Video Cloud específica. Por lo tanto, siempre agregará el término cuentas seguido de la identificación de su cuenta a la URL base:
    </p>
    <pre><code class="language-http" translate="No">https://playback-auth.api.brightcove.com/v1/accounts/{accountID}/blacklist
</code></pre>

    <h3>Autorización</h3>
    <p>
      Se requiere un token de acceso para las solicitudes y debe estar presente en el encabezado de Autorización:
    </p>
    <pre><code class="language-http" translate="No">Authorization:  Bearer  {access_token}</code></pre>
    <p>
      El token de acceso es un token de acceso OAuth2 temporal que debe obtenerse del servicio Brightcove OAuth. Para obtener detalles sobre cómo obtener credenciales de cliente y usarlas para recuperar tokens de acceso, consulte la <a href="/oauth/getting-started/overview-oauth-api-v4.html">Descripción general de Brightcove OAuth</a>.
    </p>

    <h3>Permisos</h3>
    <p>
      Las solicitudes a la API de lista negra deben realizarse desde <a href="/oauth/index.html">credenciales del cliente</a> con los siguientes permisos:
    </p>
    <ul>
      <li>
        <code translate="No">video-cloud/playback-auth/blacklist</code>
      </li>
    </ul>

    <h3>Administrar tokens incluidos en la lista negra</h3>
    <p>
      Las actualizaciones de la lista negra pueden tardar hasta un minuto en propagarse por el sistema. La API de lista negra admite las siguientes solicitudes:
    </p>

    <h4>Agregue un token a la lista negra:</h4>
    <pre><code class="language-http" translate="No">PUT  (no  req  body)/v1/accounts/{accountID}/blacklist/tokens/{token}
</code></pre>
    <p>
      Toda la cadena JWT codificada se incluye en la ruta.
    </p>

    <h4>Mostrar lista negra actual:</h4>
    <pre><code class="language-http" translate="No">GET  /v1/accounts/{accountId}/blacklist
</code></pre>
    <br />

    <h4>Compruebe si un token está en la lista negra:</h4>
    <pre><code class="language-http" translate="No">GET  /v1/accounts/{accountID}/blacklist/tokens/{token}
</code></pre>
    <p>
      Toda la cadena JWT codificada se incluye en la ruta.
    </p>
    <p>
      Respuestas:
    </p>
    <ul>
      <li>
        204 - el token está en la lista negra
      </li>
      <li>
        404: el token no está en la lista negra
      </li>
    </ul>

    <h4>Eliminar un token de la lista negra:</h4>
    <pre><code class="language-http" translate="No">DELETE  /v1/accounts/{accountID}/blacklist/tokens/{token}
</code></pre>
    <p>
      Toda la cadena JWT codificada se incluye en la ruta.
    </p>
  </section>

  <section class="bcls-section">
    <h2 id="Audit_an_account">Auditar una cuenta</h2>

    <p>
      La API de auditoría le permite generar un informe de acceso diario para el uso del Servicio de autorización de reproducción de su cuenta. Este informe incluye detalles junto con la respuesta de autorización para cada sesión.
    </p>

    <h3>API de auditoría</h3>
    <p>
      A continuación, se muestran los detalles de la API de auditoría:
    </p>

    <h3>URL base</h3>
    <p>
      La URL base de la API de auditoría es:
    </p>
    <pre><code class="language-http" translate="No">https://playback-auth.api.brightcove.com
</code></pre>

    <h3>Ruta de la cuenta</h3>
    <p>
      En todos los casos, las solicitudes se realizarán para una cuenta de Video Cloud específica. Por lo tanto, siempre agregará el término cuentas seguido de la identificación de su cuenta a la URL base:
    </p>
    <pre><code class="language-http" translate="No">https://playback-auth.api.brightcove.com/v1/audit/accounts/{accountID}
</code></pre>

    <h3>Autorización</h3>
    <p>
      Se requiere un token de acceso para las solicitudes y debe estar presente en el encabezado de Autorización:
    </p>
    <pre><code class="language-http" translate="No">Authorization:  Bearer  {access_token}
</code></pre>
    <p>
      El token de acceso es un token de acceso OAuth2 temporal que debe obtenerse del servicio Brightcove OAuth. Para obtener detalles sobre cómo obtener credenciales de cliente y usarlas para recuperar tokens de acceso, consulte la <a href="/oauth/getting-started/overview-oauth-api-v4.html">Descripción general de Brightcove OAuth</a>.
    </p>

    <h3>Permisos</h3>
    <p>
      Las solicitudes a la API de auditoría deben realizarse desde <a href="/oauth/index.html">credenciales del cliente</a> con los siguientes permisos:
    </p>
    <ul>
      <li>
        <code translate="No">video-cloud/playback-auth/audit</code>
      </li>
    </ul>

    <h3>Generar informes</h3>
    <p>
      Utilice la API de auditoría para generar un informe de acceso diario con los detalles de la sesión siguiendo estos pasos:
    </p>
    <aside class="bcls-aside  bcls-aside--information">
      <p>
        Notas:
      </p>
      <ul>
        <li>
          <p>
            Todos los registros de acceso de autorización para Brightcove se encuentran en la zona horaria UTC. Recuerde tener en cuenta las zonas horarias cuando las solicitudes no aparezcan en su informe.
          </p>
        </li>
        <li>
          <p>
            Brightcove recomienda ejecutar informes de consultas de la API de auditoría 6 horas después de la medianoche para procesarlos desde todas las regiones y completar todos los datos de autorización del día anterior. Las llamadas a la API de auditoría para una cuenta determinada y un día determinado se almacenan en caché en el lado de la API. Si ejecuta un informe antes de la medianoche sugerida + 6 horas, es posible que su informe sea incorrecto o esté incompleto.
          </p>
        </li>
      </ul>
    </aside>

    <ol class="bcls-tasklist__restart">
      <li>
        <p>
          Solicite un informe de uso diario
        </p>

        <h4>Parámetros</h4>
        <table class="bcls-table">
          <thead class="bcls-table__head">
            <tr>
              <th>Campo</th>
              <th>Tipo</th>
              <th>Descripción</th>
            </tr>
          </thead>
          <tbody class="bcls-table__body">
            <tr>
              <td><code translate="No">accountID</code></td>
              <td>Cuerda</td>
              <td>Su ID de cuenta de Video Cloud</td>
            </tr>
            <tr>
              <td><code translate="No">date</code></td>
              <td>Cuerda</td>
              <td>
                Validaciones:
                <ul>
                  <li>
                    Formato AAAA-MM-DD
                  </li>
                  <li>
                    La fecha no puede ser hoy (hora UTC)
                  </li>
                  <li>
                    La fecha no puede tener más de 30 días de antigüedad.
                  </li>
                  <li>
                    Brightcove no retiene los informes de uso del servicio de autorización después de 30 días para cumplir con el RGPD
                  </li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>

        <h4>Pedido</h4>
        <table class="bcls-table">
          <tbody class="bcls-table__body">
            <tr>
              <th>Método</th>
              <td>CORREO</td>
            </tr>
            <tr>
              <th>URL</th>
              <td>
                https://playback-auth.api.brightcove.com/v1/audit/accounts/<span class="bcls-input">{accountID}</span>/consulta/<span class="bcls-input">{date}</span>
              </td>
            </tr>
            <tr>
              <th rowspan="2">Encabezados</th>
              <td>
                Autorización: Portador <span class="bcls-input">tu token de acceso</span>
              </td>
            </tr>
            <tr>
              <td>Tipo de contenido: aplicación / json</td>
            </tr>
          </tbody>
        </table>

        <h4>Respuesta</h4>
        <p>Respuesta de muestra (200 OK):</p>

        <pre class="line-numbers">
<code class="language-json" translate="No">{
	&quot;executionID&quot;:  &quot;abcdef-asfdag-dvsbcd&quot;
}</code></pre>

        <p>
          Detalles:
        </p>
        <table class="bcls-table">
          <thead class="bcls-table__head">
            <tr>
              <th>Campo</th>
              <th>Tipo</th>
              <th>Descripción</th>
            </tr>
          </thead>
          <tbody class="bcls-table__body">
            <tr>
              <td><code translate="No">executionID</code></td>
              <td>Cuerda</td>
              <td>
                Un ID único asociado con un informe de uso para un determinado <code translate="No">accountID</code> y <code translate="No">date</code>. Esta identificación se pasa a los otros puntos finales a continuación.
              </td>
            </tr>
          </tbody>
        </table>
      </li>
      <li>
        <p>
          Verifique el estado de su informe
        </p>

        <h4>Pedido</h4>
        <table class="bcls-table">
          <tbody class="bcls-table__body">
            <tr>
              <th>Método</th>
              <td>OBTENER</td>
            </tr>
            <tr>
              <th>URL</th>
              <td>
                https://playback-auth.api.brightcove.com/v1/audit/accounts/<span class="bcls-input">{accountID}</span>/ejecución/<span class="bcls-input">{executionID}</span>/estado
              </td>
            </tr>
            <tr>
              <th rowspan="2">Encabezados</th>
              <td>
                Autorización: Portador <span class="bcls-input">tu token de acceso</span>
              </td>
            </tr>
            <tr>
              <td>Tipo de contenido: aplicación / json</td>
            </tr>
          </tbody>
        </table>

        <h4>Respuesta</h4>
        <p>Respuesta de muestra (200 OK):</p>

        <pre class="line-numbers">
<code class="language-json" translate="No">{
	&quot;status&quot;:  &quot;completed&quot;
}
</code></pre>

        <p>
          Detalles:
        </p>
        <table class="bcls-table">
          <thead class="bcls-table__head">
            <tr>
              <th>Campo</th>
              <th>Tipo</th>
              <th>Descripción</th>
            </tr>
          </thead>
          <tbody class="bcls-table__body">
            <tr>
              <td><code translate="No">status</code></td>
              <td>Cuerda</td>
              <td>Valores: "completado", "procesando", "fallido"</td>
            </tr>
          </tbody>
        </table>
      </li>
      <li>
        <p>
          Obtenga su informe
        </p>
        <h4>Pedido</h4>
        <table class="bcls-table">
          <tbody class="bcls-table__body">
            <tr>
              <th>Método</th>
              <td>OBTENER</td>
            </tr>
            <tr>
              <th>URL</th>
              <td>
                https://playback-auth.api.brightcove.com/v1/audit/accounts/<span class="bcls-input">{accountID}</span>/ejecución/<span class="bcls-input">{executionID}</span>/reporte
              </td>
            </tr>
            <tr>
              <th rowspan="2">Encabezados</th>
              <td>
                Autorización: Portador <span class="bcls-input">tu token de acceso</span>
              </td>
            </tr>
            <tr>
              <td>Tipo de contenido: aplicación / json</td>
            </tr>
          </tbody>
        </table>

        <h4>Respuesta</h4>
        <p>Respuesta de muestra (200 OK):</p>

        <pre class="line-numbers">
<code class="language-json" translate="No">{
    &quot;signedURL&quot;:  &quot;http://signed-url&quot;,
    &quot;expirationTime&quot;:  1569219842
}
</code></pre>

        <p>
          Detalles:
        </p>
        <table class="bcls-table">
          <thead class="bcls-table__head">
            <tr>
              <th>Campo</th>
              <th>Tipo</th>
              <th>Descripción</th>
            </tr>
          </thead>
          <tbody class="bcls-table__body">
            <tr>
              <td><code translate="No">SignedURL</code></td>
              <td>Cuerda</td>
              <td>
                Los resultados se devuelven como una URL de S3 que puede descargar.
              </td>
            </tr>
            <tr>
              <td><code translate="No">expirationTime</code></td>
              <td>Marca de tiempo de la época</td>
              <td>Las URL de S3 firmadas son válidas durante 15 minutos.</td>
            </tr>
          </tbody>
        </table>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Limitations">Limitaciones</h2>

    <p>
      Las siguientes limitaciones se aplican con la versión inicial de esta función:
    </p>
    <ul>
      <li>
        Hay un límite de 100 fichas en la lista negra. Después de eso, se lanzará un error.
      </li>
    </ul>
  </section>

</article>