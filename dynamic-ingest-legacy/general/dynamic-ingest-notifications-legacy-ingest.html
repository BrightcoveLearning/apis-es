---
title: 'Notificaciones de ingesta dinámica'
description: 'En este tema, aprenderá acerca de las notificaciones de Ingesta dinámica, que brindan información sobre el progreso de sus trabajos de ingesta. Tenga en cuenta que este documento se aplica solo al sistema de ingesta heredado; para Dynamic Delivery, consulte <a href="/dynamic-ingest/general/notifications-dynamic-delivery-video-cloud.html">Notificaciones para la ingesta dinámica</a> '
parent: 'General Information' 
grandparent: 'Dynamic Ingest API'
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="diAPI">Notificaciones de API de ingesta dinámica</h2>
    
    <p>Puede especificar una o más URL de devolución de llamada para recibir notificaciones de los resultados del proceso de ingesta. Las URL que especifique deben ser para aplicaciones que puedan aceptar solicitudes POST. Las notificaciones se enviarán en formato JSON.</p>
    
    <aside class="bcls-aside bcls-aside--information">
    <h3>Notas</h3>
    
    <ul>
      <li>Se admiten hasta 10 suscriptores para notificaciones de error. Puede incluir más de 10 URL para recibir notificaciones, pero solo se procesarán las primeras 10</li>
      <li>No se aceptarán las URL que terminen en una barra (/); por ejemplo, la URL "https://my.domain.com/notification-receiver" funciona, pero "https://my.domain.com/notification-receiver/" no</li>
      <li>Alternativamente, puede utilizar el <a href="/cms/references/reference.html#api-videoGroup-Get_Status_of_Ingest_Jobs">API de estado de la CMS API</a> para obtener el estado de los trabajos de ingesta de un video en particular.</li>
      <li>Los manejadores de notificaciones en servidores construidos en HTTP2 no son actualmente compatibles. Es posible que las notificaciones enviadas a los servidores HTTP2 no se entreguen sin devolver ningún error.</li>
    </ul>
    </aside>
    
    <h3>Configuración</h3>
    
    <p>He aquí un ejemplo.</p>
    
    <ul>
      <li>Usuario con ID de publicación 57838016001</li>
      <li>Quiere usar Dynamic Ingest para cargar un archivo de video fuente ubicado en https://s3.amazonaws.com/bucket/mysourcevideo.mp4</li>
      <li>Quiere cargar un título existente en el catálogo con la identificación de video 5199670523001</li>
      <li>Usando el perfil de alta resolución</li>
      <li>Quiere recibir devoluciones de llamada en dos puntos finales ubicados en http: // host1 / path1 y http: // host2 / path2 respectivamente</li>
    </ul>
    
    <p>La solicitud de DI se vería así:</p>
    
    <h4>Solicitud POST</h4>
    <textarea class="bcls-code">https://ingest.api.brightcove.com/v1/accounts/57838016001/videos/5199670523001/ingest-requests</textarea>
    
    <h4>Cuerpo de la solicitud</h4>
    <textarea class="bcls-code" style="height:10em;">{ "master": { "url": "https://s3.amazonaws.com/bucket/mysourcevideo.mp4" }, "perfil": "alta resolución", "devoluciones de llamada": ["http: // host1 / ruta1”, “http: // host2 / ruta2”]}
        </textarea>
    
    <h3>Notificación de muestra</h3>
    
    <p>Las notificaciones se envían como solicitudes POST con la notificación en el cuerpo de la solicitud como JSON <sup> <strong> <a href="#note1">[1]</a> </strong> </sup>. Aquí hay algunas notificaciones de muestra:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
        "accountId": "57838016001",
        "entityType": "ASSET",
        "version": "1",
        "status": "SUCCESS",
        "videoId": "5199670523001",
        "entity": "5199679295001",
        "action": "CREATE",
        "jobId": "699db2e5-aeb7-4765-a4a7-2cc68c7360bd"
    }
    {
        "action": "CREATE",
        "status": "SUCCESS",
        "entityType": "DIGITAL_MASTER",
        "videoId": "5199670523001",
        "entity": "5199670523001",
        "accountId": "57838016001",
        "version": "1",
        "jobId": "699db2e5-aeb7-4765-a4a7-2cc68c7360bd"
    }
    {
        "entityType": "ASSET",
        "status": "SUCCESS",
        "action": "CREATE",
        "entity": "5199680423001",
        "profileRefId": "ts7",
        "version": "1",
        "accountId": "57838016001",
        "videoId": "5199670523001",
        "jobId": "699db2e5-aeb7-4765-a4a7-2cc68c7360bd"
    }
    {
        "jobId": "699db2e5-aeb7-4765-a4a7-2cc68c7360bd",
        "accountId": "57838016001",
        "version": "1",
        "status": "SUCCESS",
        "entityType": "TITLE",
        "entity": "5199670523001",
        "videoId": "5199670523001",
        "action": "CREATE"
    }</code></pre>
    
    <h4>Notas</h4>
    
    <ul>
      <li id="note1"><sup><strong>[1]</strong> </sup> Excepción: Todas las notificaciones de contenido empaquetado con DRM se devuelven como pares clave / valor. En este caso, el <code translate="No">Content-Type</code> el encabezado será <code translate="No">application/x-www-form-urlencoded</code>. De lo contrario, el <code translate="No">Content-Type</code> estarán <code translate="No">application/json</code></li>
    </ul>
    
    <h3>Campos de notificación</h3>
    
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Artículo</th>
          <th>Descripción</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">status</code></td>
          <td>estarán <code translate="No">FAILED</code> si la ingesta o la creación de una versión no se realizó correctamente, <code translate="No">SUCCESS</code> si la solicitud tuvo éxito</td>
        </tr>
        <tr>
          <td><code translate="No">accountId</code></td>
          <td>la identificación de la cuenta</td>
        </tr>
        <tr>
          <td><code translate="No">videoId</code></td>
          <td>la identificación del video</td>
        </tr>
        <tr>
          <td><code translate="No">jobId</code></td>
          <td>el ID de trabajo para la solicitud de ingesta dinámica</td>
        </tr>
        <tr>
          <td style="vertical-align:top;"><code translate="No">profileRefId</code></td>
          <td>
          <p>Para las interpretaciones de video, esta será la <code translate="No">reference id</code> que especificó para la interpretación en su perfil de ingesta.</p>
    
          <p>Para los manifiestos, el <code translate="No">profileRefId</code> indicará el tipo de manifiesto:</p>
    
          <ul>
            <li><code translate="No">HlsManifest</code> para un manifiesto de HLS NG</li>
            <li><code translate="No">HdsManifest</code> para un manifiesto HDS</li>
            <li><code translate="No">DashManifest</code> para manifiestos DASH (2 - uno de los activos del manifiesto se usa para consumo en el MAPI, el otro se usa para consumo en la CMS API)</li>
            <li><code translate="No">SmoothIsmManifest</code> para un manifiesto suave (2: uno de los activos del manifiesto se usa para consumo en MAPI, el otro se usa para consumo en la CMS API)</li>
          </ul>
          </td>
        </tr>
        <tr>
          <td><code translate="No">entity</code></td>
          <td>si existe, el ID de Video Cloud del activo que se ingirió o falló (si el objeto de video se creó correctamente en Video Cloud)</td>
        </tr>
        <tr>
          <td><code translate="No">entityType</code></td>
          <td>el tipo de activo sobre el que se informa, por ejemplo: TITLE (un video), DIGITAL_MASTER, ASSET (una interpretación, un archivo de subtítulos o una imagen)</td>
        </tr>
        <tr>
          <td><code translate="No">errorMessage</code></td>
          <td>una explicación de por qué la ingestión falló si lo hizo</td>
        </tr>
        <tr>
          <td><code translate="No">version</code></td>
          <td>una cadena siempre igual a <code translate="No">"1"</code></td>
        </tr>
        <tr>
          <td><code translate="No">action</code></td>
          <td>la acción que ocurrió - por ejemplo, CREAR</td>
        </tr>
      </tbody>
    </table>
    
    <h3>Interpretación de notificaciones</h3>
    
    <p>Una notificación que contiene <code translate="No">"action": "CREATE"</code> y <code translate="No">"status": "SUCCESS"</code> indica la finalización de un proceso.</p>
    
    <ul>
      <li>Si el <code translate="No">entityType</code> es <code translate="No">TITLE</code> , luego se completa el procesamiento de un video ingerido.</li>
      <li>Si el <code translate="No">entityType</code> es <code translate="No">ASSET</code> , luego se agregó correctamente a su video una interpretación, imagen, manifiesto o archivo WebVTT.</li>
    </ul>
    
    <p class="BCL-aside">No hay té <code translate="No">"status": "SUCCESS"</code> en un <strong>título</strong> indica que el procesamiento está completo, pero no significa necesariamente que todas las copias se hayan creado correctamente. Para determinar si la ingesta dinámica de videos se realizó correctamente, consulte <a href="/dynamic-ingest/general/get-status-dynamic-ingest-requests-dynamic-delivery.html">Obtener el estado de las solicitudes de ingesta dinámica</a></p>
    </section>
    
    <section class="bcls-section">
    <h2 id="sampleApp">Aplicación de muestra básica</h2>
    
    <p>A continuación se muestra el código para una aplicación de registro simple para <span translate="No">API de ingesta dinámica</span> notificación. Esta aplicación está escrita en PHP, pero puede usar cualquier idioma, siempre que la aplicación tenga una URL pública y pueda manejar solicitudes HTTP (s) POST.</p>
    
    <p>Puede ver el archivo de registro que genera esta aplicación <a href="//solutions.brightcove.com/bcls/di-api/di-log.txt">aquí.</a></p>
    
    <p class="BCL-aside">Nota: si intenta implementar esta aplicación usted mismo, deberá asegurarse de que la aplicación tenga permiso para escribir en su archivo de registro. Recuerde también que el archivo de registro puede crecer rápidamente; probablemente desee vaciarlo con regularidad.</p>
    
    <pre class="line-numbers">
    <code class="language-php">&lt;? php // POST no funcionará para datos JSON $ problem = "No hay errores"; tratar { $json = file_get_contents('php://input'); $decoded = json_decode($json, true); } captura (Excepción $ e) { $problem = $e-&gt;getMessage(); } // convierte la notificación en JSON bastante impreso $ notificación = json_encode ($ decoded, JSON_PRETTY_PRINT); $ logEntry = $ notificación. "\\ nErrores al recibir notificaciones:". $ problema. "\\ n
---
---------------------------- \\ n"; // Por último, dígale a PHP dónde puede encontrar el archivo de registro y dígale a PHP que lo abra // y agregue la cadena que creamos anteriormente. $ logFileLocation = "di-log.txt"; $ fileHandle = fopen ($ logFileLocation, 'a') o morir ("- 1"); fwrite ($ fileHandle, $ logEntry); fclose ($ fileHandle); // la línea de abajo se muestra cuando navega por la aplicación directamente echo "La aplicación de devolución de llamada Dynamic Ingest se está ejecutando"; ?&gt; </code></pre>
    </section>
    </article>
 