---
title: 'Visión general: API de ingesta dinámica'
description: '<p>En este tema, aprenderá a utilizar la <span translate="No">API de ingesta dinámica</span> para cargar y administrar contenido de video. </p>
<aside class="bcls-aside bcls-aside--information">Tenga en cuenta que esta descripción general es para Dynamic Ingest con el <strong>sistema de ingesta heredado</strong>. Si tiene una nueva cuenta de Video Cloud o ha convertido su cuenta a <strong>Entrega dinámica</strong> , ir a <a href="/dynamic-ingest/getting-started/overview-dynamic-ingest-api-dynamic-delivery.html">esta página en su lugar</a></aside>'

parent: 'Getting Started' 
grandparent: <span translate="No">API de ingesta dinámica</span> Diseño heredado: puesta en escena
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="API_functionality">Funcionalidad API</h2>

    <p>La API Dynamic Ingest (DI) de Brightcove se basa en la funcionalidad en la que los archivos de origen de video se descargan desde la ubicación de almacenamiento del cliente y se crean representaciones específicas de los archivos de origen. (También hay una opción para <a href="/dynamic-ingest/getting-started/source-file-upload-api-dynamic-ingest.html">sube tus archivos fuente</a> a una ubicación temporal donde Dynamic Ingest pueda acceder a ellos). La plataforma está centrada en la nube, distribuida globalmente y basada en prácticas modernas para ofrecer la mejor consistencia y velocidad de su clase.</p>

    <aside class="bcls-aside bcls-aside--information">Nota: para los tipos de video segmentados (HLS y DASH), algunos reproductores no manejan el caso en el que las longitudes de transmisión de audio y video difieren en más de la duración de un segmento. Si lo encuentras, prueba a utilizar una longitud de segmento más corta.</aside>
    </section>

    <section class="bcls-section">
    <h2 id="workflowoverview">Descripción general del flujo de trabajo</h2>

    <p>Se utilizan varios sistemas / tecnologías en la transcodificación y almacenamiento generales de medios. Ellos son:</p>

    <ul>
      <li><strong>API del sistema de gestión de contenido (CMS)</strong>: Crea un objeto de video para usar en la API de DI</li>
      <li><strong>Zencoder</strong>: Transcodifica el video creando múltiples versiones.</li>
      <li><strong>Amazon S3</strong>: Mueve el maestro y las representaciones al almacenamiento, según la configuración del perfil</li>
      <li><strong>Catalogar</strong>: Almacena la información necesaria asociada con el video.</li>
    </ul>

    <p>Después de la transcodificación inicial, tiene las siguientes acciones que puede realizar en los medios:</p>

    <ul><!-- the following item on hold indefinitely --><!-- <li><strong>Delete</strong>: Delete, when needed, the master or all items</li> -->
      <li><strong>Volver a transcodificar</strong>: Crear nuevas representaciones cuando el maestro está presente (error si el maestro no está presente)</li>
      <li><strong>Reemplazar</strong>: Apunta a un nuevo maestro o reemplaza un maestro existente</li>
    </ul>
    </section>

    <section class="bcls-section">
    <h2 id="operations">Operaciones</h2>

    <p>Cuando utilice la API de DI, realizará diferentes operaciones, como leer un perfil de ingesta y escribir información de ingesta en su cuenta. La siguiente es una lista completa de las operaciones necesarias para las tareas de DI:</p>

    <ul>
      <li>video-nube / video / crear</li>
      <li>video-nube / video / lectura</li>
      <!-- for adding images -->
      <li>video-nube / video / actualización</li>
      <li>video-cloud / ingest-profiles / profile / read</li>
      <li>video-cloud / ingest-profiles / account / read</li>
      <li>video-cloud / ingest-profiles / account / write</li>
      <li>video-nube / ingest-profiles / profile / write</li>
      <li>video-cloud / upload-urls / read</li>
    </ul>

    <p>Para obtener las credenciales del cliente, use Studio <a href="/general/managing-api-authentication-credentials.html">herramientas de administración</a> o vea uno de los siguientes documentos:</p>

    <ul>
      <li><a href="/oauth/guides/oauth-create-client-credentials-using-curl.html">OAuth: Obtener credenciales de cliente mediante CURL</a></li>
      <li><a href="/oauth/guides/oauth-create-client-credentials-using-postman.html">OAuth: Obtenga las credenciales del cliente con Postman</a></li>
    </ul>
    </section>

    <section class="bcls-section">
    <h2 id="best_practices">Mejores prácticas</h2>

    <aside class="bcls-aside bcls-aside--tip">
    <ul>
      <li>Un límite de 20 solicitudes por segundo en cada cuenta para el total de solicitudes en DI y el <span translate="No">API de CMS</span> (API de CMS o solicitudes de API de ingesta)</li>
      <li>Un límite de 100 trabajos DI simultáneos por cuenta (hay opciones adicionales para grandes lotes de solicitudes de cuentas convertidas a <a href="/dynamic-ingest/getting-started/overview-dynamic-ingest-api-dynamic-delivery.html">Entrega dinámica</a>)</li>
      <li>Ingesta contenido de menos de 100 GB por archivo (si necesitas ingerir archivos más grandes, comunícate con tu administrador de cuentas)</li>
      <li>Si está ingiriendo archivos en lotes, limite los trabajos de prioridad normal concurrentes a 100 y espere a que un trabajo complete el procesamiento antes de agregar otro</li>
      <li>Valide los cambios en el perfil de ingesta antes de ingerir lotes completos</li>
      <li>Debería <strong>no</strong> tener procesamiento de trabajos duplicados para el mismo activo. Un activo en este caso se define como un objeto de video, una pista de audio en un idioma específico, una pista de texto en un idioma específico o un tipo de imagen específico. Aquí hay algunos ejemplos para ilustrar el punto:
      <ul>
        <li>INACEPTABLE: Envíe una solicitud de ingesta para un archivo de video y luego envíe otra solicitud de ingesta de video con la misma ID de video antes de que se complete el primer trabajo de ingesta.</li>
        <li>ACEPTABLE: Envíe una solicitud de ingesta para un archivo de video, luego envíe una solicitud de ingesta para una pista de texto en inglés asociada con la misma ID de video y luego envíe una solicitud de ingesta para una imagen en miniatura con la misma ID de video</li>
        <li>ACEPTABLE: Envíe un trabajo de ingesta para una pista de texto en inglés y luego envíe una solicitud de ingesta para una pista de texto en español en paralelo</li>
        <li>INACEPTABLE: Envíe una solicitud para ingerir una pista de audio en español y luego envíe inmediatamente una solicitud para ingerir otra pista de audio en español en la misma ID de video</li>
      </ul>
      </li>
      <li>La <code translate="No">profile </code> El campo para solicitudes de ingesta es <strong>Opcional</strong>. Evite codificar el <code translate="No">profile </code> en aplicaciones e integraciones; en su lugar, establezca el perfil más utilizado como el <strong>defecto</strong> para la cuenta y omita el campo, o <a href="/ingest-profiles/references/reference.html#api-Profile-Get_All_Ingest_Profiles">buscar los perfiles disponibles para la cuenta</a> y obligar al usuario a elegir uno.</li>
    </ul>
    </aside>
    </section>

    <section class="bcls-section">
    <h2 id="sourceLocations">Ubicaciones de origen válidas</h2>

    <p>Dynamic Ingest puede extraer archivos de video de origen de: HTTP / HTTPS o S3: con o sin autenticación</p>

    <p>Ejemplos:</p>

    <ul>
      <li>http://example.com/path/to/input.avi</li>
      <li>https://dl.dropboxusercontent.com/u/3641457/Bird_Titmouse.mp4</li>
      <li>s3: //my-bucket/video.mp4</li>
    </ul>

    <aside class="bcls-aside bcls-aside--information">Notas:
    <ul>
      <li>Los nombres de los archivos de vídeo (incluida la extensión) no deben superar los 120 caracteres de un solo byte (60 de doble byte). Si es así, el video se procesará correctamente, pero no podrá volver a codificarlo más tarde.</li>
      <li>Los nombres de host (para ubicaciones de archivos o URL de devolución de llamada) no deben contener caracteres de subrayado u otros signos de puntuación o caracteres especiales según las especificaciones de IETF. Ver <a href="https://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_hostnames">este artículo de Wikipedia</a> para más información. Se devolverán errores si los nombres de host no se ajustan al estándar IETF.</li>
      <li>Dynamic Ingest puede <strong>no</strong> ingiera archivos alojados en Google Drive, porque Google Drive no genera enlaces directos a archivos de video.</li>
    </ul>
    </aside>

    <h3>Notas sobre S3</h3>

    <p>Si sus videos están en un bucket de S3 protegido, consulte <a href="/dynamic-ingest/general/using-dynamic-ingest-s3.html">Uso de Dynamic Ingest con S3</a> para obtener detalles sobre cómo configurar permisos para Dynamic Ingest para acceder a sus archivos.</p>

    <p>Las ventajas de usar la ingesta basada en extracción incluyen un flujo de trabajo más simple y tener un repositorio de sus propios maestros digitales. Sin embargo, si esta no es una opción para usted, también puede usar <a href="/dynamic-ingest/getting-started/source-file-upload-api-dynamic-ingest.html">Carga del archivo de origen</a> para cargar sus videos y otros activos en una ubicación temporal desde la cual Dynamic Ingest puede acceder a ellos.</p>
    </section>

    <section class="bcls-section">
    <h2 id="Source_file_names">Nombres de archivos de origen</h2>

    <p>Todas las URL de entrada deben codificarse correctamente de acuerdo con <a href="https://tools.ietf.org/html/rfc3986#section-2.1">RFC 3986</a> cuando se envía a Brightcove. Esto significa que cualquier <a href="https://tools.ietf.org/html/rfc3986#section-2.2">personajes reservados</a> que se encuentran en la ruta de la URL están codificados en porcentaje (los espacios se codifican para <code translate="No">%20</code>), y todos los caracteres reservados que se encuentran en la consulta de la URL están codificados en porcentaje (los espacios se codifican en <code translate="No">+</code> o <code translate="No">%20</code> , y <code translate="No">+</code> siendo codificado a <code translate="No">%2B</code>).</p>

    <p>A <strong>pre-firmado</strong> S3 (<strong>v2</strong> contiene <em>Firma</em>, <em>Expira</em> y <em>AWSAccessKeyId</em>, y <strong>v4</strong> contiene <em>Algoritmo X-Amz</em>, <em>Credencial X-Amz</em>, <em>X-Amz-Date</em>, <em>X-Amz-Caduca</em>, <em>Encabezados firmados por X-Amz</em>, y <em>X-Amz-Signature</em>) o <strong>GCS</strong> (contiene <em>Firma</em>, <em>Expira</em>, y <em>GoogleAccessId</em>) url ya debería estar codificada correctamente y <strong>se puede usar tal cual</strong>.</p>

    <aside class="bcls-aside bcls-aside--tip">Tenga en cuenta que los caracteres Unicode de doble byte <strong>están</strong> permitido en los nombres de archivo.</aside>
    </section>

    <section class="bcls-section">
    <h2 id="ingestingVideos">Ingestión de videos</h2>

    <p>Se requieren dos llamadas a la API para ingerir videos:</p>

    <ol>
      <li>Llama a <span translate="No">API de CMS</span> para crear un objeto de video en el sistema Video Cloud y obtener su identificación</li>
      <li>Llame a la API de DI para proporcionar la URL del archivo de origen del video y especifique el <a href="/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">perfil de ingesta</a> para ser utilizado</li>
    </ol>

    <p>Un conjunto de muestra de solicitudes básicas tendría el siguiente aspecto:</p>

    <h3>Solicitud de API de CMS</h3>

    <dl>
      <dt>Método HTTP</dt>
      <dd>CORREO</dd>
      <dt>Solicitar URL</dt>
      <dd>https://cms.api.brightcove.com/v1/accounts/{account_id} videos</dd>
      <dt>Cuerpo de la solicitud</dt>
      <dd>
      <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "name": "My new video"
    }
    </code>
    </pre>
      </dd>
    </dl>

    <p>Los datos de respuesta incluirán el video. <code translate="No">id </code> , que se utiliza en la siguiente solicitud.</p>

    <h3>Solicitud de API de ingesta</h3>

    <dl>
      <dt>Método HTTP</dt>
      <dd>CORREO</dd>
      <dt>Solicitar URL</dt>
      <dd>https://ingest.api.brightcove.com/v1/accounts/{account_id} videos /{video_id} solicitudes-de-ingesta</dd>
      <dt>Cuerpo de la solicitud</dt>
      <dd>
      <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "master": {
    "url": "http://host/master.mp4"
    },
    "profile": "high-resolution"
    }
    </code>
    </pre>
      </dd>
    </dl>

    <p>Ver el <a href="/dynamic-ingest/getting-started/overview-dynamic-ingest-api-dynamic-delivery.html">Inicio rápido</a> para obtener detalles de las llamadas a la API, y también puede ver un <a href="/dynamic-ingest-legacy/code-samples/dynamic-ingest-api-sample-ingesting-videos-legacy-ingest.html">muestra de trabajo</a>.</p>

    <p>Para <span translate="No">API de CMS</span> llamar para crear el vídeo en el sistema Video Cloud, consulte la <a href="/cms/getting-started/overview-cms-api.html#settingvalues">Descripción general de la API de CMS</a>. Tenga en cuenta que el video <code translate="No">name </code> es obligatorio, y que el nombre y cualquier otra cadena incluida para los metadatos de video (como el <code translate="No">description </code> ) <strong>debe estar codificado en URI</strong>.</p>
    </section>

    <section class="bcls-section">
    <h2 id="sampleAssets">Activos de muestra</h2>

    <p>Brightcove Learning Services proporciona algunos activos de muestra que puede utilizar para experimentar y comenzar con Dynamic Ingest. Estos activos incluyen videos cortos, imágenes y subtítulos WebVTT en varios idiomas:</p>

    <ul>
      <li><a href="//solutions.brightcove.com/bcls/assets/videos/">Vídeos</a></li>
      <li><a href="//solutions.brightcove.com/bcls/assets/images/">Imagenes</a></li>
      <li><a href="//solutions.brightcove.com/bcls/assets/vtt/">Subtítulos WebVTT</a></li>
    </ul>
    </section>

    <section class="bcls-section">
    <h2 id="replaceVideo">Reemplazar un video</h2>

    <p>Para reemplazar un video con una nueva versión o un nuevo conjunto de representaciones, el <span translate="No">API de ingesta dinámica</span> la llamada es exactamente la misma que sería para <a href="/dynamic-ingest-legacy/code-samples/dynamic-ingest-api-sample-ingesting-videos-legacy-ingest.html">ingiriendo nuevos videos</a> - la única diferencia es que no es necesario realizar una llamada previa al <span translate="No">API de CMS</span> para crear el objeto de video en el sistema Video Cloud y obtener una identificación para él. Si el archivo de video de origen en la URL especificada es el mismo que se ingirió originalmente, simplemente obtendrá un nuevo conjunto de representaciones. Si el archivo de origen es nuevo, reemplazará el video existente. Todos los videos se seguirán reproduciendo con las interpretaciones existentes hasta que se complete la retranscodificación.</p>

    <p>Ver el <a href="/dynamic-ingest-legacy/code-samples/dynamic-ingest-api-sample-re-transcoding-videos-legacy-ingest.html">muestra de trabajo aquí</a>.</p>
    </section>

    <section class="bcls-section">
    <h2 id="retranscode">Retranscodificar un video</h2>

    <p>Si eliges <a href="https://studio.support.brightcove.com/admin/managing-ingest-profiles.html">archivar un maestro</a> cuando ingeriste el video a través del <span translate="No">API de ingesta dinámica</span> o el módulo de carga de Studio, entonces también puede retranscodificar el video desde el maestro. Nuevamente, la URL para la solicitud de ingesta será la misma, pero el cuerpo de la solicitud tendrá lo siguiente:</p>

    <pre class="line-numbers">
    <code class="language-javascript" translate="No">// request
    POST /v1/accounts/{account_id}/videos/{video_id}/ingest-requests
    // request body
    {
    "master": { <strong><em>"use_archived_master": true</em></strong> },
    "profile": "videocloud-default-v1"
    }
    </code>
    </pre>

    <aside class="bcls-aside bcls-aside--information">
    <p>Notas:</p>

    <ul>
      <li>Si el maestro no se archivó o el video fue <em>no</em> ingerido utilizando el <span translate="No">API de ingesta dinámica</span> o el módulo de carga, recibirá un error</li>
      <li>Los perfiles de ingesta estándar recomendados (videocloud-default-v1, screencast-1280, alta resolución, transición de reproductor inteligente, estándar de tasa de bits única y tasa de bits única alta) archivarán todos el maestro. Si está utilizando un perfil de ingesta personalizado, debe <a href="https://studio.support.brightcove.com/admin/managing-ingest-profiles.html">especificar que el maestro</a> debe archivarse si desea volver a codificar desde el maestro más adelante.</li>
      <li>El maestro es <strong>Nunca</strong> modificado durante la retranscodificación</li>
      <li>Los ajustes para archivar y distribuir masters son <strong>Nunca</strong> modificado durante la retranscodificación</li>
      <li>Problema conocido: cuando retranscodifica un video mediante la ingestión dinámica, la fecha de activación del video se actualiza a la fecha actual. Si usa listas de reproducción inteligentes ordenadas por fecha de activación, esto afectará el orden de los videos en la lista de reproducción.</li>
    </ul>
    </aside>
    </section>

    <section class="bcls-section">
    <h2 id="capture-images">Imagenes</h2>

    <p>Puedes usar el <span translate="No">API de ingesta dinámica</span> para capturar imágenes en miniatura y póster de su video, o para agregar sus propias imágenes. Para obtener más detalles, consulte <a href="/dynamic-ingest/ingest-guides/images-and-dynamic-ingest-api.html">Imágenes y API de ingesta dinámica</a>.</p>

    <aside class="bcls-aside bcls-aside--information">Si sus imágenes se extraerán de un depósito de S3 protegido, deberá establecer una política de depósito para permitir que Video Cloud acceda a los archivos. Ver <a href="/dynamic-ingest/general/using-dynamic-ingest-s3.html#setPolicy">Uso de Dynamic Ingest con S3</a> para detalles.</aside>
    </section>

    <section class="bcls-section">
    <h2 id="ingest_captions">Ingestión de subtítulos</h2>

    <p>También puede agregar subtítulos WebVTT a su video o cargarlos para un video existente usando Dynamic Ingest. Para obtener más detalles, consulte <a href="/dynamic-ingest/ingest-guides/ingesting-webvtt-files-text-trackscaptions.html">Ingesta de archivos WebVTT</a>.</p>

    <aside class="bcls-aside bcls-aside--information">
    <p>Notas:</p>

    <ol>
      <li>para imágenes y pistas de texto, solo se admiten las URL públicas HTTP o HTTPS o las URL de S3 firmadas</li>
      <li>para las pistas de texto, Dynamic Ingest solo las agrega / agrega a la lista vtt del video, incluso si es una solicitud de re-transcodificación. el cliente debe utilizar el <span translate="No">API de CMS</span> para gestionarlos (actualizar / eliminar)</li>
      <li>Dynamic Ingest acepta hasta 100 pistas de texto a la vez</li>
      <li>mime_type no es compatible</li>
    </ol>
    </aside>
    </section>

    <section class="bcls-section">
    <h2 id="drm">DRM y HLSe</h2>

    <p>Dynamic Ingest maneja videos que usan cualquiera de los tipos de DRM admitidos por Brightcove. HLSe también es compatible.</p>
    </section>

    <section class="bcls-section">
    <h2 id="archiving">Archivado de copias</h2>

    <p>De forma predeterminada, todas las representaciones de imágenes y vídeos se archivan automáticamente. Si desea desactivar el archivo de interpretaciones, <a href="https://supportportal.brightcove.com/">póngase en contacto con el soporte de Brightcove</a>. Tenga en cuenta que <a href="/ingest-profiles/guides/archiving-masters.html">maestros digitales</a> se archivan si se especifica en el perfil de ingesta.</p>
    </section>

    <section class="bcls-section">
    <h2 id="notifications">Notificaciones</h2>

    <p>Puede especificar una o más URL de devolución de llamada para recibir notificaciones de los resultados del proceso de ingesta. Las URL que especifique deben ser para aplicaciones que puedan aceptar solicitudes POST. Las notificaciones se enviarán en formato JSON.</p>

    <p>Los detalles sobre la recepción e interpretación de notificaciones se pueden encontrar en <a href="/dynamic-ingest/general/notifications-dynamic-delivery-video-cloud.html">Notificaciones: API de CMS e ingesta dinámica</a></p>
    </section>
    </article>