---
title: 'Implementación de reglas de entrega'
description: "En este tema, aprenderá cómo implementar las reglas de entrega de Brightcove, que le permiten personalizar la forma en que se entregan sus medios para cumplir con sus objetivos comerciales."
parent: Getting started 
grandparent: Delivery Rules API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Descripción general</h2>

<p>Los editores a menudo necesitan modificar las características del contenido de sus manifiestos de medios por razones tanto técnicas como comerciales. Para satisfacer estas necesidades, Brightcove ha creado un marco donde se pueden aplicar reglas que modificarán el contenido del manifiesto devuelto por Dynamic Delivery.</p>

<p>Las reglas de entrega se componen de condiciones y acciones.</p>
<ul>
  <li>
    <strong>Condiciones</strong> - Condiciones "si" que desencadenan una determinada acción
  </li>
  <li>
    <strong>Comportamiento</strong> - Parámetros "Entonces" que definen cómo se modifica el manifiesto
  </li>
</ul>
<p>Para obtener más detalles sobre las reglas de entrega, consulte lo siguiente:</p>
<ul>
  <li>
    <a href="/delivery-rules/getting-started/overview-delivery-rules.html">Descripción general: Reglas de entrega</a>
  </li>
  <li>
    <a href="https://player.support.brightcove.com/playback/using-delivery-rules-with-bcp.html">Uso de reglas de entrega con Brightcove Player</a>
  </li>
  <li>
    <a href="https://sdks.support.brightcove.com/features/using-delivery-rules-with-sdks.html">Uso de reglas de entrega con los SDK nativos</a>
  </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Account_setup">Configuracion de cuenta</h2>

<p>Comuníquese con su gerente de cuenta para conocer los precios y habilitar esta función para su cuenta.</p>
</section>

<section class="bcls-section">
<h2 id="Applying_rules">Aplicando reglas</h2>

<p>El siguiente diagrama de flujo muestra cómo se aplican las reglas de entrega.</p>
<figure class="bcls-figure">
  <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/delivery-rules/rules-diagram.png" alt="Delivery rules applied">
  <figcaption class="bcls-caption--image">Se aplicaron las reglas de entrega</figcaption>
</figure>
</section>

<section class="bcls-section">
<h2 id="Conditions">Condiciones</h2>

<p>Las condiciones "si", admitidas en la primera fase, incluyen las siguientes:</p>

<ul>
  <li>
    <p>
      <strong>Solicitud explícita</strong> - Un ID de configuración es el ID de una acción que ha creado. Utilizará esta identificación para pasar a la Playback API en tiempo de ejecución. Esta identificación se asigna a valores de configuración que permiten que los servicios subyacentes tomen decisiones aprovechadas por la Playback API para devolver los datos de respuesta adecuados.
    </p>
  </li>
  <li>
    <strong>Grupo de dispositivos</strong> - Tipo de dispositivo detectado por el análisis del agente de usuario. Los grupos actualmente apoyados incluyen:
    <ul>
      <li>
        androide
      </li>
      <li>
        appletv
      </li>
      <li>
        Chromecast
      </li>
      <li>
        ipad
      </li>
      <li>
        iphone
      </li>
      <li>
        escritorio-chrome
      </li>
      <li>
        escritorio-firefox
      </li>
      <li>
        escritorio-safari
      </li>
      <li>
        fetchtv
      </li>
      <li>
        ios-otro
      </li>
      <li>
        roku-7/8
      </li>
      <li>
        smartphone-genérico
      </li>
      <li>
        tableta-android
      </li>
      <li>
        tableta-kindle
      </li>
      <li>
        desconocido
      </li>
    </ul>
    &nbsp;
  </li>
  <li>
    <strong>Geografía</strong> - Ubicación física del dispositivo solicitante:
    <ul>
      <li>
        Continente
      </li>
      <li>
        País
      </li>
    </ul>
  </li>
</ul>

</section>

<section class="bcls-section">
<h2 id="Actions">Comportamiento</h2>

<p>Las acciones, o parámetros "entonces", admitidos en la primera fase incluyen lo siguiente:</p>

<ul>
  <li>
    <p>
        <strong>CDN de entrega de medios</strong> - De las CDN configuradas para su uso dentro de una cuenta de Dynamic Delivery determinada, la CDN que se usará para la entrega de segmentos de medios.
    </p>
  </li>
  <li>
    <strong>Características de reproducción</strong> - Filtros basados en las características de las representaciones multimedia subyacentes. Éstas incluyen:
    <ul>
      <li>
        Tasa de bits de video mínima
      </li>
      <li>
        Tasa máxima de bits de video
      </li>
      <li>
        Resolución de video mínima
      </li>
      <li>
        Resolución máxima de video
      </li>
      <li>
        Número máximo de reproducciones de audio
      </li>
      <li>
        Número máximo de representaciones de video
      </li>
      <li>
        Tasa de bits del primer video
      </li>
      <li>
        Discontinuidades
      </li>
    </ul>
  </li>
</ul>

</section>

<section class="bcls-section">
<h2 id="Scope">Alcance</h2>

<p>Las acciones se pueden aplicar en dos niveles:</p>
<ul>
  <li>
    <strong>Cuenta</strong> - Acciones que se aplican a todas las solicitudes realizadas a la cuenta de un cliente específico
  </li>
  <li>
    <strong>Solicitud especifica</strong> - Acciones que se invocan en una solicitud específica
  </li>
</ul>

<p>
  Las acciones se aplicarán en el orden indicado anteriormente. Las acciones posteriores anularán las anteriores.
</p>

</section>

<section class="bcls-section">
<h2 id="Defining_rules">Definiendo reglas</h2>

<p>Utilice la API de reglas de entrega para personalizar la entrega de medios.</p>

<h3 id="Delivery_Rules_API">API de reglas de entrega</h3>
<p>
  La <a href="https://apis.support.brightcove.com/delivery-rules/references/reference.html">API de reglas de entrega</a> le permite definir condiciones y acciones para controlar la entrega de sus medios.
</p>
<p>La <a href="#API_Response">respuesta</a> de la API de reglas de entrega contiene un <code translate="No">conditions</code> formación. Esta matriz le permite crear múltiples <code translate="No">if</code> / <code translate="No">then</code> condiciones donde cada <code translate="No">then</code> apunta a uno o más <a href="#Response_body_for_actions">ID de acción</a>.</p>
<p>Aunque no hay métodos para agregar o eliminar <code translate="No">conditions</code> , puede hacerlo actualizando el <code translate="No">conditions</code> formación.</p>

<!-- <aside class="bcls-aside bcls-aside--tip">Since each account has one conditions block, you will update the block to add or remove conditions.</aside> -->

<h3>URL base</h3>
<p>
  La URL base de la API es:
</p>
<pre><code class="language-http" translate="No">https://delivery-rules.api.brightcove.com</code></pre>

<h3>Ruta de la cuenta</h3>
<p>
  En todos los casos, se realizarán solicitudes para una cuenta de Video Cloud específica. Por lo tanto, siempre agregará el término cuentas seguido de la identificación de su cuenta a la URL base:
</p>
<pre><code class="language-http" translate="No">https://delivery-rules.api.brightcove.com/accounts/{accountID}</code></pre>

<h3>Autorización</h3>
<p>
  Se requiere un token de acceso para las solicitudes y debe estar presente en el encabezado de Autorización:
</p>
<pre><code class="language-http" translate="No">Authorization: Bearer {access_token}</code></pre>
<p>
  El token de acceso es un token de acceso OAuth2 temporal que debe obtenerse del servicio Brightcove OAuth. Para obtener detalles sobre cómo obtener credenciales de cliente y usarlas para recuperar tokens de acceso, consulte la <a href="/oauth/getting-started/overview-oauth-api-v4.html">Descripción general de Brightcove OAuth</a>.
</p>

<h3>Permisos</h3>
<p>
  Las solicitudes a la API de derechos de reproducción deben realizarse desde <a href="/oauth/getting-started/overview-oauth-api-v4.html">credenciales del cliente</a> con los siguientes permisos:
</p>
<ul>
  <li>
    <code translate="No">video-cloud/delivery-rules/read</code>
  </li>
  <li>
    <code translate="No">video-cloud/delivery-rules/all</code>
  </li>
</ul>

<h3>Administrar reglas</h3>
<p>
  La API de reglas de entrega admite las siguientes solicitudes. Para obtener detalles de la API, consulte la <a href="https://apis.support.brightcove.com/delivery-rules/references/reference.html">Referencia de la API de reglas de entrega</a>.
</p>

<h4>Obtenga las reglas de entrega</h4>
<p>
  Utilice la siguiente solicitud GET para obtener la última versión de las Reglas de entrega para una cuenta.
</p>
<pre><code class="language-http" translate="No">GET /accounts/{accountID}</code></pre>

<h5 id="API_Response">Respuesta de API</h5>
<p>
  Aquí está el cuerpo de respuesta. Tenga en cuenta que las Reglas de entrega contienen un conjunto de condiciones y un conjunto de acciones.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;conditions&quot;: [
    {
      &quot;name&quot;: &quot;MyCondition1&quot;,
      &quot;if&quot;: {
        &quot;device_group&quot;: [
          &quot;ipad&quot;
        ],
        &quot;request_country&quot;: [
          &quot;string&quot;
        ],
        &quot;request_continent&quot;: [
          &quot;AF&quot;
        ]
      },
      &quot;then&quot;: [
        &quot;MyAction1&quot;
      ]
    }
  ],
  &quot;actions&quot;: [
    {
      &quot;id&quot;: &quot;44c91a1d-71f1-40b4-b9cf-3abcd12345&quot;,
      &quot;properties&quot;: {
        &quot;min_video_bitrate&quot;: 0,
        &quot;max_video_bitrate&quot;: 0,
        &quot;first_video_bitrate&quot;: 0,
        &quot;min_video_resolution&quot;: &quot;string&quot;,
        &quot;max_video_resolution&quot;: &quot;string&quot;,
        &quot;max_video_renditions&quot;: 0,
        &quot;max_audio_renditions&quot;: 0,
        &quot;preferred_cdn_provider&quot;: &quot;string&quot;,
        &quot;preferred_cdn_domain&quot;: &quot;string&quot;,
      &quot;video_codecs&quot;: [
        &quot;string&quot;
      ],
      &quot;audio_codecs&quot;: [
        &quot;string&quot;
      ]
    }
    }
  ]
}</code></pre>
<br />

<h4>Obtener condiciones</h4>
<p>
  Utilice la siguiente solicitud GET para obtener las condiciones de una cuenta.
</p>
<pre><code class="language-http" translate="No">GET /accounts/{accountID}/conditions</code></pre>
<h5>Respuesta de la API</h5>
<p>
  Aquí está el cuerpo de respuesta.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">[
  {
    &quot;name&quot;: &quot;MyCondition1&quot;,
    &quot;if&quot;: {
      &quot;device_group&quot;: [
        &quot;ipad&quot;
      ],
      &quot;request_country&quot;: [
        &quot;string&quot;
      ],
      &quot;request_continent&quot;: [
        &quot;AF&quot;
      ]
    },
    &quot;then&quot;: [
      &quot;44c91a1d-71f1-40b4-b9cf-3abcd12345&quot;
    ]
  }
]</code></pre>
<br />

<h4>Condiciones de actualización</h4>
<p>
  Utilice la siguiente solicitud PUT para actualizar las condiciones de una cuenta.
</p>
<pre class="line-numbers"><code class="language-http" translate="No">PUT /accounts/{accountID}/conditions
  Content-Type: application/json
  Authorization: Bearer {access_token}
  Body: {conditions object}
</code></pre>
<!-- <p>
  For a list of valid fields, see the <a href="#Request_body_for_conditions">Request body for conditions</a> section.
</p> -->
<h4 id="Request_body_for_conditions">Cuerpo de solicitud para condiciones</h4>
<p>
  Aquí está el cuerpo de solicitud de condiciones. Observe que se trata de una matriz de objetos de condición.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">[
  {
    &quot;name&quot;: &quot;MyCondition1&quot;,
    &quot;if&quot;: {
      &quot;device_group&quot;: [
        &quot;ipad&quot;
      ],
      &quot;request_country&quot;: [
        &quot;string&quot;
      ],
      &quot;request_continent&quot;: [
        &quot;AF&quot;
      ]
    },
    &quot;then&quot;: [
      &quot;44c91a1d-71f1-40b4-b9cf-3abcd12345&quot;
    ]
  }
]</code></pre>
<br />
<p>
  Aquí están los detalles del campo para las condiciones:
</p>
<table class="bcls-table">
  <thead class="bcls-table__head">
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descripción</th>
    </tr>
  </thead>
  <tbody class="bcls-table__body">
    <tr>
      <td><code translate="No">name</code></td>
      <td>Cuerda</td>
      <td>Identificador único de la afección</td>
    </tr>
    <tr>
      <td><code translate="No">device_group</code></td>
      <td>Cuerda</td>
      <td>Matriz de tipos de dispositivos detectados por el análisis del agente de usuario</td>
    </tr>
    <tr>
      <td><code translate="No">request_country</code></td>
      <td>Cuerda</td>
      <td>Matriz de códigos de país de dos letras</td>
    </tr>
    <tr>
      <td><code translate="No">request_continent</code></td>
      <td>Cuerda</td>
      <td>Matriz de códigos de continente de dos letras</td>
    </tr>
    <tr>
      <td><code translate="No">then</code></td>
      <td>Cuerda</td>
      <td>Identificador único de la acción asociada</td>
    </tr>
  </tbody>
</table>

<h4>Crea una acción</h4>
<p>
  Utilice la siguiente solicitud POST para crear acciones para una cuenta.
</p>
<pre class="line-numbers"><code class="language-http" translate="No">POST /accounts/{accountID}/actions
  Content-Type: application/json
  Authorization: Bearer {access_token}
  Body: {actions object}
</code></pre>
<!-- <p>
  For a list of valid fields, see the <a href="#Request_body_for_actions">Request body for actions</a> section.
</p> -->
<h4 id="Request_body_for_actions">Cuerpo de solicitud de acciones</h4>
<p>
  Aquí está el cuerpo de la solicitud de acciones.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
    &quot;properties&quot;: {
      &quot;min_video_bitrate&quot;: 0,
      &quot;max_video_bitrate&quot;: 0,
      &quot;first_video_bitrate&quot;: 0,
      &quot;min_video_resolution&quot;: &quot;string&quot;,
      &quot;max_video_resolution&quot;: &quot;string&quot;,
      &quot;max_video_renditions&quot;: 0,
      &quot;max_audio_renditions&quot;: 0,
      &quot;preferred_cdn_provider&quot;: &quot;string&quot;,
      &quot;preferred_cdn_domain&quot;: &quot;string&quot;,
      &quot;video_codecs&quot;: [
        &quot;string&quot;
      ],
      &quot;audio_codecs&quot;: [
        &quot;string&quot;
      ]
  }
}</code></pre>

<p>
  Aquí están los detalles del campo para las acciones:
</p>
<table class="bcls-table">
  <thead class="bcls-table__head">
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descripción</th>
    </tr>
  </thead>
  <tbody class="bcls-table__body">
    <tr>
      <td><code translate="No">properties</code></td>
      <td>Objeto</td>
      <td>Un objeto de propiedades definidas para una acción específica.</td>
    </tr>
    <tr>
      <td>,<code translate="No">min_video_bitrate</code> <br/>
      <code translate="No">max_video_bitrate</code></td>
      <td>Entero</td>
      <td>Establecer la tasa de bits de video mínima o máxima permitida (kbps)</td>
    </tr>
    <tr>
      <td><code translate="No">first_video_bitrate</code></td>
      <td>Entero</td>
      <td>Establecer la tasa de bits para el primer video (kbps)</td>
    </tr>
    <tr>
      <td>,<code translate="No">min_video_resolution</code> <br/><code translate="No">max_video_resolution</code></td>
      <td>Cuerda</td>
      <td>Establezca la resolución de video mínima o máxima permitida (WxH)</td>
    </tr>
    <tr>
      <td><code translate="No">max_video_renditions</code></td>
      <td>Entero</td>
      <td>Establecer el número máximo de representaciones de video</td>
    </tr>
    <tr>
      <td><code translate="No">max_audio_renditions</code></td>
      <td>Entero</td>
      <td>Establecer el número máximo de reproducciones de audio</td>
    </tr>
    <tr>
      <td><code translate="No">preferred_cdn_provider</code></td>
      <td>Cuerda</td>
      <td>Establecer el proveedor de CDN preferido</td>
    </tr>
    <tr>
      <td><code translate="No">preferred_cdn_domain</code></td>
      <td>Cuerda</td>
      <td>Establecer el dominio CDN preferido</td>
    </tr>
    <tr>
      <td><code translate="No">video_codecs</code></td>
      <td>Cuerda</td>
      <td>Matriz de códecs de video</td>
    </tr>
    <tr>
      <td><code translate="No">audio_codecs</code></td>
      <td>Cuerda</td>
      <td>Matriz de códecs de audio</td>
    </tr>
  </tbody>
</table>

<h4 id="Response_body_for_actions">Respuesta de API para acciones</h4>
<p>
  Aquí está el cuerpo de la solicitud de acciones.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
    &quot;id&quot;: &quot;44c91a1d-71f1-40b4-b9cf-3abcd12345&quot;,
    &quot;properties&quot;: {
      &quot;min_video_bitrate&quot;: 0,
      &quot;max_video_bitrate&quot;: 0,
      &quot;first_video_bitrate&quot;: 0,
      &quot;min_video_resolution&quot;: &quot;string&quot;,
      &quot;max_video_resolution&quot;: &quot;string&quot;,
      &quot;max_video_renditions&quot;: 0,
      &quot;max_audio_renditions&quot;: 0,
      &quot;preferred_cdn_provider&quot;: &quot;string&quot;,
      &quot;preferred_cdn_domain&quot;: &quot;string&quot;,
      &quot;video_codecs&quot;: [
       &quot;string&quot;
      ],
      &quot;audio_codecs&quot;: [
       &quot;string&quot;
      ]
  }
}</code></pre>

<p>
  Además de los campos de acciones en la solicitud, la respuesta de la API incluye el siguiente campo generado:
</p>
<table class="bcls-table">
  <thead class="bcls-table__head">
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descripción</th>
    </tr>
  </thead>
  <tbody class="bcls-table__body">
    <tr>
      <td><code translate="No">id</code></td>
      <td>Cuerda</td>
       <td>Un identificador único generado por el sistema para la acción. Este es el <code translate="No">actionID</code> utilizado en los métodos de actualización y eliminación.</td>
    </tr>
  </tbody>
</table>

<h4>Obtener acciones</h4>
<p>
  Utilice la siguiente solicitud GET para obtener las acciones de una cuenta.
</p>
<pre><code class="language-http" translate="No">GET /accounts/{accountID}/actions</code></pre>
<h5>Respuesta de API</h5>
<p>
  Ver el <a href="#Response_body_for_actions">Respuesta de API para acciones</a>.
</p>

<h4>Obtener una acción</h4>
<p>
  Utilice la siguiente solicitud GET para obtener una acción específica para una cuenta.
</p>
<pre><code class="language-http" translate="No">GET /accounts/{accountID}/actions/{actionID}</code></pre>
<h5>Respuesta de API</h5>
<p>
  Ver el <a href="#Response_body_for_actions">Respuesta de API para acciones</a>.
</p>

<h4>Actualizar una acción</h4>
<p>
  Utilice la siguiente solicitud PUT para actualizar una acción para una cuenta.
</p>
<pre class="line-numbers"><code class="language-http" translate="No">PUT /accounts/{accountID}/actions/{actionID}
  Content-Type: application/json
  Authorization: Bearer {access_token}
  Body: {actions object}
</code></pre>
<h5>Solicitud de API</h5>
<p>
  A continuación, se muestra un cuerpo de solicitud de muestra para actualizar las acciones.
</p>
<aside class="bcls-aside bcls-aside--information">los <code translate="No">id</code> en el siguiente ejemplo de JSON es el ID de acción. Debe coincidir con el ID de acción en la ruta.</aside>

<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;id&quot;: &quot;44c91a1d-71f1-40b4-b9cf-3edb94645943&quot;,
  &quot;properties&quot;: {
   &quot;custom_properties&quot;: {
    &quot;generate_thumbnails&quot;: false,
    &quot;hls_iframes&quot;: true
   }
  }
 }</code></pre>
<h5>Respuesta de API</h5>
<p>
  Aquí hay una respuesta de muestra para acciones actualizadas.
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;id&quot;: &quot;44c91a1d-71f1-40b4-b9cf-3edb94645943&quot;,
  &quot;properties&quot;: {
   &quot;custom_properties&quot;: {
    &quot;generate_thumbnails&quot;: false,
    &quot;hls_iframes&quot;: true
   }
  }
 }</code></pre>


<h4>Eliminar una acción</h4>
<p>
  Utilice la siguiente solicitud DELETE para eliminar una acción de una cuenta.
</p>
<pre class="line-numbers"><code class="language-http" translate="No">DELETE /accounts/{accountID}/actions/{actionID}</code></pre>


<!-- <p>
  Here is an example of all of the fields you can include in the request body:
</p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;geo&quot;: {
  &quot;allowed_countries&quot;: [
    &quot;MX&quot;,
    &quot;US&quot;
  ],
  &quot;blocked_countries&quot;: [
    &quot;JP&quot;,
    &quot;CN&quot;
  ],
  &quot;allowed_zip_codes&quot;: [
    &quot;US-90210&quot;
  ],
  &quot;blocked_zip_codes&quot;: [
    &quot;US-72810&quot;
  ],
  &quot;allowed_dmas&quot;: [
    501
  ],
  &quot;blocked_dmas&quot;: [
    803
  ]
},
&quot;allowed_domains&quot;: [
  &quot;www.google.com&quot;,
  &quot;www.brightcove.com&quot;
],
&quot;blocked_domains&quot;: [
  &quot;www.ooyala.com&quot;
],
&quot;start_time&quot;: 1572905011,
&quot;end_time&quot;: 1672905011,
&quot;allowed_ips&quot;: [
  &quot;192.168.1.1&quot;
],
&quot;blocked_ips&quot;: [
  &quot;192.168.1.1&quot;
],
&quot;allowed_days&quot;: [
  &quot;mon&quot;,
  &quot;tue&quot;
],
&quot;allowed_hours&quot;: [
  &quot;5-6&quot;
],
&quot;allow_insecure&quot;: true,
&quot;disabled&quot;: false,
&quot;name&quot;: &quot;Optional playback right name&quot;
}
</code></pre> -->



</section>

<section class="bcls-section">
<h2 id="Limitations">Limitaciones</h2>

<p>Existen algunas limitaciones conocidas al utilizar las reglas de entrega:</p>
<ul>
  <!-- <li>
    <strong>CDN Providers</strong> - A customer may only have one CDN configuration from a given provider. For instance, it will be possible to switch between Akamai and Cloudfront, but not between two separate Akamai configurations.
  </li> -->
  <li>
    <strong>Contenido multimedia</strong>: las reglas de entrega no funcionan con vídeos Smooth o PMP4.
  </li>
  <li>
    <strong>Contenido multimedia</strong> - Las reglas de entrega no funcionarán con videos en vivo.
  </li>
  <li>
    <strong>Solo audio</strong> - Las reglas de entrega con anuncios del lado del servidor (SSAI) habilitados requieren contenido de video y audio. Esta es una restricción de SSAI.
  </li>
</ul>

</section>

</article>