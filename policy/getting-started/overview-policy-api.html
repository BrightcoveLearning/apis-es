---
title: 'Visión general: API de política'
description: 'En este tema, aprenderá para qué sirve la API de políticas y cómo usarla. La API de políticas se utiliza para crear u obtener claves de políticas.'
parent: Getting Started 
grandparent: Policy API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <div class="training-video-player-ipx" data-experience="5a73630f7afd7a00101bc1b5" data-video-ids="5853357211001">&nbsp;</div>
    <script src="https://players.brightcove.net/20318290001/experience_5a73630f7afd7a00101bc1b5/live.js"></script>
    
    <section class="bcls-section">
    <h2 id="Introduction">Introducción</h2>
    
    <p>La <a href="/policy/getting-started/policy-keys.html">clave de política</a> se utiliza para recuperar videos y contenido de listas de reproducción de su biblioteca de Video Cloud usando el <a href="/playback/getting-started/overview-playback-api.html">API de reproducción</a>.</p>
    
    <p>También vea el <a href="/policy/references/reference.html">Referencia de API</a>.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Do_you_need_one">¿Necesitas uno?</h2>
    
    <p>Solo hay casos especiales en los que necesita generar sus propias claves de política:</p>
    
    <ul>
      <li>Las claves de política se generan para Brightcove Players automáticamente cuando las crea. Solo necesita generar claves de política directamente usando esta API si desea obtener una clave con filtrado geográfico para un reproductor, o acceder a la API de reproducción sin crear un reproductor; normalmente, esto sería para aplicaciones creadas con el <a href="https://sdks.support.brightcove.com/">SDK del dispositivo</a>. Ver <a href="/policy/getting-started/policy-keys.html">Claves de política</a> para obtener instrucciones sobre cómo obtener la clave de política para cualquier Brightcove Player.</li>
      <li>Realización de solicitudes de búsqueda de videos:
      <ul>
        <li>Debes usar un <a href="#Search_videos">Clave de política habilitada para búsqueda</a>.</li>
        <li>Las claves de política generadas para los nuevos reproductores de Brightcove no están habilitadas para la búsqueda de forma predeterminada. Debe configurar esto manualmente usando el <a href="#Search_videos">API de política</a>.</li>
        <li>En general, las claves de política habilitadas para la búsqueda solo deben almacenarse en un servidor y no en un reproductor de navegador o aplicación móvil, ya que se pueden usar para enumerar todos los videos reproducibles. Para algunas cuentas, esto puede no ser aplicable si no le importa que se puedan descubrir todos sus videos reproducibles.</li>
        <li>Las solicitudes de búsqueda solo devolverán videos reproducibles. Para obtener detalles sobre la solicitud / respuesta de la API, consulte la <strong>Obtener videos</strong> sección de la <a href="/playback/references/reference_v1.html">Referencia de la API de reproducción</a>.</li>
      </ul>
      </li>
    </ul>
    </section>
    
    <section class="bcls-section">
    <h2 id="FAQ">Preguntas más frecuentes</h2>
    
    <p>A continuación, presentamos algunas preguntas sobre la API de políticas que recibimos habitualmente.</p>
    
    <dl>
      <dt class="bcls-question">¿Se pueden crear claves de política para varias cuentas o solo para una?</dt>
      <dd class="bcls-answer">Las claves de política permiten el acceso a videos y listas de reproducción para una cuenta. Si tiene varias cuentas, debe crear claves de política para cada una.</dd>
      <dt class="bcls-question">¿Caducan las claves de la póliza?</dt>
      <dd class="bcls-answer">No, las claves de póliza son válidas para siempre. Si necesita revocar una clave de política, debe comunicarse con <a href="//support.brightcove.com/en/contact">Soporte de Brightcove</a> - incluya la identificación de la cuenta y la clave de la política que desea revocar en la solicitud.</dd>
      <dt class="bcls-question">¿Funcionarán las claves de política para todos los usuarios de la cuenta?</dt>
      <dd class="bcls-answer">Sí, cualquiera que tenga la clave de política puede usarla.</dd>
      <dt class="bcls-question">¿Se puede actualizar una clave de política?</dt>
      <dd class="bcls-answer">No, no hay forma de actualizar una clave de política. Tu también puedes <a href="/policy/getting-started/policy-keys.html#Getting_the_policy_key">obtener la clave de la política</a> desde un reproductor existente en su cuenta de Video Cloud, o puede crear una nueva clave de política utilizando la API de políticas.</dd>
    </dl>
    </section>
    
    <section class="bcls-section">
    <h2 id="Base_URL">URL base</h2>
    
    <p>La URL base de la API de políticas es:</p>
    
    <pre>
    <code class="language-http" translate="No">https://policy.api.brightcove.com/v1</code></pre>
    
    <h3>Ruta de la cuenta</h3>
    
    <p>En todos los casos, se realizarán solicitudes para una cuenta de Video Cloud específica. Entonces, siempre agregarás <code translate="No">/accounts/ </code> seguido de la identificación de su cuenta a la URL base:</p>
    
    <pre>
    <code class="language-http" translate="No">https://policy.api.brightcove.com/v1<strong>/accounts/{account_id}</strong></code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Authentication">Autenticación</h2>
    
    <p>Las solicitudes se autentican mediante un token de acceso pasado en un <code translate="No">Authorization </code> encabezamiento:</p>
    
    <pre>
    <code class="language-json" translate="No">Authorization: Bearer {access_token}</code></pre>
    
    <p>Para obtener tokens de acceso, siga estos pasos:</p>
    
    <ol class="bcls-tasklist">
      <li>
      <p>Obtenga sus credenciales de cliente ( <code translate="No">client_id </code> y <code translate="No">client_secret </code> ) mediante <a href="/general/managing-api-authentication-credentials.html">Estudio de Video Cloud</a> (recomendado).</p>
    
      <p>Para los tokens de acceso que se pueden usar con solicitudes de creación de claves de políticas, se requieren sus credenciales de cliente para tener los siguientes permisos en Studio: <strong>Los jugadores leen y leen / escriben</strong></p>
    
      <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Authentication permissions" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/policy-api/overview/authentication-permissions.png" />
      <figcaption class="bcls-caption--image">Permisos de autenticación</figcaption>
      </figure>
    
      <p>También puede obtener las credenciales de cliente directamente a través del <a href="/oauth/getting-started/overview-oauth-api-v4.html">API de Brightcove OAuth</a>.</p>
      </li>
      <li>Una vez que tenga las credenciales de cliente, puede <a href="/oauth/guides/getting-access-tokens.html">obtener tokens de acceso temporal de la API de OAuth</a>.</li>
    </ol>
    </section>
    
    <section class="bcls-section">
    <h2 id="required_headers">Encabezados obligatorios</h2>
    
    <p>Además de <code translate="No">Authorization</code> encabezado discutido en la sección anterior, las solicitudes también deben tener un <code translate="No">Content-Type</code> encabezamiento:</p>
    
    <pre class="line-numbers">
    <code class="language-bash" translate="No">Content-Type: application/json</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Create_a_policy_key">Crea una clave de política</h2>
    
    <p>Para crear una nueva clave de política, realice una solicitud POST para:</p>
    
    <pre>
    <code class="language-http" translate="No">https://policy.api.brightcove.com/v1/accounts/{account_id}/policy_keys</code></pre>
    
    <h3>Cuerpo de la solicitud</h3>
    
    <p>En el cuerpo de la solicitud, incluya el JSON de la política:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "key-data": {
        "account-id": "{account_id}"
      }
    }</code></pre>
    
    <p>Esta es la política más básica, que restringe el acceso a la cuenta, debe incluirla en cualquier política que cree. La identificación de la cuenta aquí debe coincidir con la identificación de la cuenta en la URL de la solicitud, o se devolverá un error.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Domain_restriction">Restricción de dominio</h2>
    
    <p>Además de limitar el acceso a la cuenta, también puede limitar el acceso a dominios específicos agregando el <code translate="No">allowed-domains </code> clave:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "key-data": {
        "account-id": "123456789001",
        "allowed-domains": [
          "http://www.abc.com",
          "https://www.abc.com",
          "http://www.xyz.com",
          "https://www.xyz.com"
        ]
      }
    }</code></pre>
    
    <aside class="bcls-aside bcls-aside--warning">
    <ul>
      <li>Los dominios deben contener el protocolo y el nombre de dominio, y el puerto, a menos que sea el puerto predeterminado para el protocolo (por ejemplo, http://www.abc.com, https://www.def.com:8888), pero <strong>no rutas ni barras al final ("/")</strong></li>
      <li>Se puede usar cualquier clave de su cuenta para acceder al contenido de la cuenta a través de la API de reproducción, por lo que si está usando la restricción de dominio, le recomendamos que restrinja el dominio de todos sus jugadores.</li>
      <li>Porque el <a href="https://sdks.support.brightcove.com">SDK de reproductores nativos de Brightcove</a> no envíe un encabezado de origen, no puede usar una clave de política restringida por dominio. Si prueba esto, obtendrá un <code translate="No">403 Forbidden</code> respuesta cuando intenta obtener contenido de su biblioteca de Video Cloud.</li>
    </ul>
    </aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="Geo_restriction">Restricción geográfica</h2>
    
    <p>La API de políticas se puede utilizar para implementar el filtrado geográfico para un jugador en lugar de o además de <a href="/cms/managing-videos/using-cms-api-add-geo-filtering.html">videos individuales.</a></p>
    
    <aside class="bcls-aside bcls-aside--information">
    <ul>
      <li>Una política puede restringir la reproducción según el país detectado por el espectador. Para crear y utilizar una clave con esta política, la cuenta debe poder utilizar funciones de filtrado geográfico. Esta política también denegará el acceso si el usuario final parece estar haciendo su solicitud a través o desde un proxy anonimizado.</li>
      <li>Se aplican las restricciones geográficas aplicadas en una clave de política <strong>solo</strong> por los jugadores que usan esa clave de política.</li>
      <li>La restricción geográfica también puede ser <a href="/cms/managing-videos/using-cms-api-add-geo-filtering.html">aplicado a videos individuales</a>. Video Cloud aplica políticas de filtrado geográfico tanto a nivel de reproductor como de video, por lo que si un país está excluido por cualquiera de las dos, el video no estará disponible en ese país.</li>
    </ul>
    </aside>
    
    <h3>Muestra</h3>
    
    <p>A continuación, se muestra un ejemplo de conjunto de políticas de lista blanca que solo permite la reproducción desde los EE. UU. Y territorios y bases militares de EE. UU.:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{"account-id": "8523232323",
      "geo": {
        "countries": ["us", "usmil", "pr", "gu", "vi", "as", "mp"],
        "exclude_countries": false
      }
    }</code></pre>
    
    <p>Para incluir esos países en la lista negra, establezca <code translate="No">exclude_countries </code> a la verdad.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Require_SSAI">Requerir SSAI</h2>
    
    <p>Cuando trabaje con la inserción de anuncios del lado del servidor (SSAI), es posible que desee una forma de hacer cumplir la configuración de anuncios adecuada en sus solicitudes de API. Puede hacer esto configurando su clave de política para requerir que un <code translate="No">ad_config_id </code> se agrega como un parámetro de URL a todas las solicitudes de la API de reproducción.</p>
    
    <h3>Muestra</h3>
    
    <p>Aquí hay un ejemplo:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "key-data": {
        "account-id": "1752604059001",
        "require-ad-config": true
      }
    }</code></pre>
    
    <p>Para obtener detalles sobre el uso de <code translate="No">ad_config_id </code> con sus solicitudes de la API de reproducción, consulte el <a href="/playback/getting-started/overview-playback-api.html#Video_request_with_SSAI">Descripción general de la API de reproducción: Solicitud de video con SSAI</a> documento.</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Search_videos">Buscar videos</h2>
    
    <p>Al realizar una solicitud de búsqueda de video, debe utilizar una clave de política que esté habilitada para la búsqueda. Para crear una clave de política habilitada para la búsqueda, el cuerpo de la solicitud de la llamada debe incluir lo siguiente:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "key-data": {
        "account-id": "57838016001",
        "apis": ["search"]
      }
    }</code></pre>
    
    <aside class="bcls-aside bcls-aside--warning">En general, las claves de política habilitadas para la búsqueda solo deben almacenarse en un servidor y no en un reproductor de navegador o aplicación móvil, ya que se pueden usar para enumerar todos los videos reproducibles. Para algunas cuentas, esto puede no ser aplicable si no le importa si se pueden descubrir todos sus videos reproducibles.</aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="API_Response">Respuesta de API</h2>
    
    <p>La respuesta a las solicitudes de creación de políticas será JSON que incluye el cifrado <code translate="No">key-string </code> que puede utilizar para autenticar solicitudes a la API de reproducción, así como la política asociada con la clave:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "key-data": {
        "account-id": "57838016001"
      },
      "key-string": "BCpkADawqM0NK0Rq8n6sEQyWykemrqeSmIQqqVt3XBrdpl8TYlvqN3hwKphBJRnkPgx6WAbozCW_VgTOBCNf1AQRh8KnmXSXfveQalRc5-pyNlSod5XzP99If2U"
    }</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Policy_requests">Solicitudes de política</h2>
    
    <p>Para recuperar el objeto de política asociado con un <code translate="No">key-string </code> , haz una solicitud GET a:</p>
    
    <pre>
    <code class="language-json" translate="No">/accounts/v1/{account_id}/policy_keys/{key_string}</code></pre>
    
    <p>La respuesta será una representación JSON de la cadena de claves y la política:</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "key-data": {
        "account-id": "57838016001"
      },
      "key-string": "BCpkADawqM0NK0Rq8n6sEQyWykemrqeSmIQqqVt3XBrdpl8TYlvqN3hwKphBJRnkPgx6WAbozCW_VgTOBCNf1AQRh8KnmXSXfveQalRc5-pyNlSod5XzP99If2U"
    }</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Revoke_a_policy">Revocar una política</h2>
    
    <p>Si necesita revocar una política existente, envíe una solicitud a <a href="http://support.brightcove.com/en/contact">Soporte de Brightcove</a>. Incluya la cadena de clave de la política que desea revocar en su solicitud.</p>
    </section>
    </article>
 