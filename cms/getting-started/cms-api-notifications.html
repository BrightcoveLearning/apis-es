---
title: 'Notificaciones de la CMS API'
description: 'En este tema, aprenderá sobre <span translate="No">CMS API</span> notificaciones. los <span translate="No">CMS API</span> proporciona notificaciones de cambios en los videos de su cuenta, ya sea que los haya realizado un usuario de la cuenta o el sistema Video Cloud.'

parent: 'Getting Started' 
grandparent: CMS API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
  <h2 id="overview">Descripción general</h2>
  
  <p>Puede recibir notificaciones cuando <code translate="No">video-change</code> los eventos ocurren en su biblioteca de videos. Las notificaciones se enviarán a la URL que especifique, que debe apuntar a una aplicación capaz de manejar <span translate="No">HTTP</span> <code translate="No">POST</code> peticiones.</p>
  
  <h3>Autenticación</h3>
  
  <p>Como todas las solicitudes a la CMS API, las solicitudes para configurar o enumerar suscripciones de notificación deben autenticarse mediante un <a href="/oauth/guides/getting-access-tokens.html">token de acceso</a>. Las credenciales de cliente utilizadas para obtener el token de acceso deben tener permisos para <code translate="No">video-cloud/notifications/all</code> (<strong translate="No">CMS-&gt; Notificaciones</strong> si usa el <a href="https://studio.support.brightcove.com/admin/managing-api-authentication-credentials.html">Interfaz de usuario de Studio</a> para crear las credenciales).</p>
  
  <h3>Configuración</h3>
  
  <p>Puede especificar hasta 10 puntos finales para recibir notificaciones haciendo un <code translate="No">POST</code> solicitud de <code class="language-http" translate="No">https://cms.api.brightcove.com/v1/accounts/{account_id}/subscriptions</code> e incluir JSON en el cuerpo de la solicitud de esta manera:</p>
  
  <pre class="line-numbers">
        <code class="language-json" translate="No">{
        "endpoint":"http://solutions.brightcove.com/bcls/di-api/di-callbacks.php",
        "events":["video-change"]
        }
        </code>
        </pre>
  
  <p>Las notificaciones se envían en formato JSON. He aquí un ejemplo:</p>
  
  <pre class="line-numbers">
        <code class="language-json" translate="No">{"timestamp":1423840514446,
        "account_id":"775205503001",
        "event":"video-change",
        "video":"4020894387001",
        "version":26}
        </code>
        </pre>
  
  <aside class="bcls-aside bcls-aside--information">Actualmente, no hay otra forma de suscribirse a las notificaciones excepto a través de la API.</aside>
  
  <h3>Campos de notificación</h3>
  
  <table class="bcls-table">
    <thead class="bcls-table__head">
      <tr>
        <th>Artículo</th>
        <th>Descripción</th>
      </tr>
    </thead>
    <tbody class="bcls-table__body">
      <tr>
        <td ><code translate="No">timestamp</code></td>
        <td >hora en que ocurrió el evento en <span translate="No">Época</span> milisegundos</td>
      </tr>
      <tr>
        <td ><code translate="No">account_id</code></td>
        <td >los <span translate="No">Video Cloud</span> ID de la cuenta</td>
      </tr>
      <tr>
        <td ><code translate="No">event</code></td>
        <td >el tipo de evento - actualmente esto siempre será <code translate="No">video-change</code></td>
      </tr>
      <tr>
        <td ><code translate="No">video</code></td>
        <td >la identificación del video</td>
      </tr>
      <tr>
        <td ><code translate="No">version</code></td>
        <td >la versión del video - cada conjunto de eventos de cambio incrementa la versión del video - por ejemplo, la creación de un nuevo conjunto de representaciones constituiría un conjunto de eventos de cambio</td>
      </tr>
    </tbody>
  </table>
  
  <p>Las solicitudes para crear una suscripción recibirán un <span translate="No">HTTP 422</span> respuesta de error para las siguientes condiciones:</p>
  
  <ul>
    <li>La <code translate="No">endpoint</code> o <code translate="No">events</code> falta el campo en el cuerpo de la solicitud</li>
    <li>La <code translate="No">events</code> el valor del campo no es una lista (matriz)</li>
    <li>La suscripción definida ya existe</li>
    <li>Ya tienes 10 suscripciones a este evento</li>
  </ul>
  
  <h3>Fallas de notificación</h3>
  
  <p>El sistema de notificación trata cualquier <code translate="No">4xx</code> o <code translate="No">5xx</code> volver del servidor del cliente como una falla que se puede reintentar. Las devoluciones de llamada fallidas se reintentarán hasta 20 veces, con un retraso que aumenta exponencialmente entre las devoluciones de llamada posteriores. Los primeros reintentos ocurrirán minutos después del intento inicial de devolución de llamada. Si la devolución de llamada sigue fallando y llegamos hasta el vigésimo reintento, el retraso del reintento será de unos días.</p>
  
  <aside class="bcls-aside bcls-aside--information">&gt; Notas:
  <ul>
    <li><code translate="No">video-change</code> Los eventos se activan mediante procesos del sistema automatizados, así como por acciones del usuario, por lo que estos eventos no siempre se corresponderán con los cambios que realizó en las propiedades del video en Studio o mediante las API.</li>
    <li>Los controladores de notificaciones de los servidores creados en HTTP2 no son compatibles actualmente. Es posible que las notificaciones enviadas a los servidores HTTP2 no se entreguen sin devolver ningún error.</li>
  </ul>
  </aside>
  
  <h3>Cortafuegos</h3>
  
  <p>En caso de que su organización tenga una política estricta con respecto a las fuentes de tráfico entrante a través de su firewall, permitimos las direcciones IP de AWS us-east-1 / Virginia. Esto está sujeto a cambios, por lo que todas las direcciones IP de AWS deben incluirse en la lista blanca. Ver <a href="http://docs.aws.amazon.com/general/latest/gr/aws-ip-ranges.html">http://docs.aws.amazon.com/general/latest/gr/aws-ip-ranges.html</a> para más información.</p>
  
  <h3>Punto final para suscripciones a notificaciones</h3>
  
  <pre class="line-numbers">
        <code class="language-http" translate="No">/accounts/{account_id}/subscriptions
        </code>
        </pre>
  
  <h3 id="createSubscription">Crea una nueva suscripción</h3>
  
  <p>Para crear una nueva suscripción, envíe un <code translate="No">POST</code> solicitud con un cuerpo de solicitud que incluya el punto final al que desea que se envíen notificaciones y <code translate="No">video-change</code> como el único elemento en un <code translate="No">events</code> formación:</p>
  
  <pre class="line-numbers">
        <code class="language-json" translate="No">{ "endpoint": "http://solutions.brightcove.com:9002", "events": [ "video-change" ] }
        </code>
        </pre>
  
  <h3 id="getSubscriptions">Obtenga una lista de sus suscripciones</h3>
  
  <p>Para obtener una lista de todas sus suscripciones, envíe un <code translate="No">GET</code> solicitud al punto final de las suscripciones.</p>
  
  <h3 id="getSubscription">Obtenga o elimine una sola suscripción</h3>
  
  <p>Utilice el siguiente punto final para obtener o eliminar una única suscripción:</p>
  
  <h4>Punto final</h4>
  
  <pre class="line-numbers">
        <code class="language-http" translate="No">/accounts/{account_id}/subscriptions/{subscription_id}
        </code>
        </pre>
  
  <p>A <code translate="No">GET</code> solicitud recuperará la suscripción. A <code translate="No">DELETE</code> solicitud eliminará la suscripción. No puede actualizar una suscripción en este momento. Si desea modificar una suscripción, deberá eliminarla y crear una nueva.</p>
  </section>
  
  <section class="bcls-section">
  <h2 id="What_triggers">¿Qué activa las notificaciones?</h2>
  
  <p><code translate="No">video-change</code> Los eventos se activan por cualquier cambio en los metadatos del video. Esto incluye cualquier cambio en el video realizado en Studio o mediante un <span translate="No">CMS API</span> método de escritura. También hay eventos del sistema que activarán <code translate="No">video-change</code> eventos.</p>
  
  <p>Los cambios que desencadenarán un evento incluyen:</p>
  
  <ul>
    <li>Se crea un video</li>
    <li>Comienza la ingestión de video o archivo de activos</li>
    <li>Se completó la ingestión de video o archivo de activos</li>
    <li>La codificación de una nueva interpretación termina</li>
    <li>Se crea una imagen de póster</li>
    <li>Se crea una imagen en miniatura</li>
    <li>Se borra un video</li>
    <li>Se cambian los metadatos del video (por el sistema o un usuario)</li>
  </ul>
  
  <h3>Notas</h3>
  
  <p>Retranscodificar un video no activará un <code translate="No">video-change</code> evento a menos que el conjunto de copias resultante sea diferente.</p>
  
  <p>Hay eventos del sistema que ocurren después de que se elimina un video, por lo que recibirá notificaciones sobre un video después de eliminarlo.</p>
  
  <p>Que sera <strong>no</strong> desencadenar un <code translate="No">video-change</code> El evento es un cambio en un elemento de video que no cambia los metadatos del video. Por ejemplo, si reemplaza un archivo de pista de texto remoto o una imagen, pero la URL grabada en los metadatos del video sigue siendo la misma, no <code translate="No">video-change</code> ocurrirá el evento y no se enviará ninguna notificación.</p>
  </section>
  </article>