---
title: 'Agregar puntos de referencia'
description: 'En esta muestra, aprenderá a agregar puntos de referencia a un video mediante programación utilizando la API de CMS.'

parent: 'Code Samples' 
grandparent: CMS API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="introduction">Introducción</h2>

    <aside class="bcls-aside bcls-aside--information">Esta muestra y el código asociado se proporcionan como una guía para su desarrollo de producción. El código no está certificado para uso en producción ni se admite oficialmente.</aside>

    <p>Los puntos de referencia son lugares especificados en la línea de tiempo del video. Cuando se reproduce el video, un evento se transmite automáticamente cada vez que se alcanza un punto de referencia; con la API del reproductor, puede escuchar estos eventos y realizar cualquier acción que desee. Además, puede leer toda la información de los puntos de referencia de los metadatos de vídeo almacenados en el reproductor. <code translate="No">mediainfo</code> objeto, que te permite <a href="https://player.support.brightcove.com/code-samples/brightcove-player-sample-ad-indicators-playback-bar.html">marcar los puntos de referencia en la línea de tiempo del video</a> de alguna manera si quieres.</p>

    <p>Hay dos tipos de puntos de referencia:</p>

    <ul>
      <li>Puntos de referencia de anuncios: se utilizan para marcar lugares donde se debe realizar una solicitud de anuncio (si el video y el reproductor están habilitados para publicidad).</li>
      <li>Puntos de referencia de código: se utilizan para realizar alguna acción utilizando la API del reproductor; algunos usos típicos son mostrar algún tipo de llamado a la acción (CTA) o mostrar alguna imagen o texto relacionado con el contenido del video, tal vez como una superposición de video o en la página alrededor del reproductor.</li>
    </ul>
  </section>

  <section class="bcls-section">
    <h2 id="implementation_overview">Descripción general de la implementación</h2>

    <p>Puede agregar puntos de referencia en <a href="https://studio.support.brightcove.com/media/working-cue-points-media-module.html">el módulo Studio Media</a>. También puede agregarlos usando la API de CMS, que es el método que usaremos en esta muestra.</p>

    <h3>Método HTTP</h3>

    <p>Los puntos de referencia se pueden agregar cuando <a href="/cms/references/reference.html#api-videoGroup-Create_Video">crea el video</a> o más tarde con un <a href="/cms/references/reference.html#api-videoGroup-Update_Video">solicitud de actualización</a>. En esta muestra, los agregaremos a un video existente haciendo un <a href="/cms/references/reference.html#api-videoGroup-Update_Video">actualización de video</a> solicitud, lo que significa que utilizará el <code translate="No">PATCH</code> método.</p>

    <aside class="bcls-aside bcls-aside--information">Si actualiza el video nuevamente para cambiar o agregar puntos de señal adicionales, debe incluir toda la matriz de puntos de señal en el cuerpo de la solicitud.</aside>

    <h3>Punto final</h3>

    <p>El punto final para la solicitud de actualización de video es:</p>

    <pre class="line-numbers">
          <code class="language-http" translate="No">https://cms.api.brightcove.com/v1/accounts/<span class="bcls-input">account_id</span></code>/ videos /<span class="bcls-input">video_id</span></pre>

    <h3>Cuerpo de la solicitud</h3>

    <p>El cuerpo de la solicitud es un objeto JSON que puede contener muchos elementos de metadatos de video. Aquí solo veremos el <code translate="No">cue_points</code> field, que se establece en una matriz de objetos de puntos de referencia, como en el siguiente ejemplo:</p>

    <pre class="line-numbers">
          <code class="language-json" translate="No">{
          "cue_points": [
              {
                "name": "Ad Cue Point",
                "type": "AD",
                "time": 2.0,
                "metadata": null,
                "force_stop": false
              },
              {
                "name": "Code Cue Point",
                "type": "CODE",
                "time": 4.0,
                "metadata": "The metadata might be text or the url for an image to display",
                "force_stop": true
              }
            ]
          }</code></pre>

    <h3>Campos de objeto de punto de referencia</h3>

    <p>A continuación se muestra una descripción de los campos de los objetos de puntos de referencia.</p>

    <table class="bcls-table">
      <caption class="bcls-caption--table">Campos de objeto de punto de referencia</caption>
      <thead class="bcls-table__head">
        <tr>
          <th>Campo</th>
          <th>Tipo</th>
          <th>Necesario</th>
          <th>Descripción</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td ><code translate="No">name</code></td>
          <td >cuerda</td>
          <td >no</td>
          <td >Un nombre arbitrario: esto puede ser útil para identificar un punto de referencia particular en el código de la API del reproductor</td>
        </tr>
        <tr>
          <td ><code translate="No">type</code></td>
          <td >cuerda</td>
          <td >sí</td>
          <td >Debe ser <code translate="No">AD</code> o <code translate="No">CODE</code></td>
        </tr>
        <tr>
          <td ><code translate="No">time</code></td>
          <td >número</td>
          <td >sí</td>
          <td >Tiempo para el punto de referencia en segundos desde el comienzo del video <sup> <strong> <a href="#note1">[1]</a> </strong> </sup></td>
        </tr>
        <tr>
          <td ><code translate="No">metadata</code></td>
          <td >cuerda</td>
          <td >no</td>
          <td >Cualquier cadena de hasta 128 caracteres de un solo byte: esta podría ser información útil para su controlador de eventos de punto de referencia, como el texto de una superposición o la ubicación de una imagen para mostrar</td>
        </tr>
        <tr>
          <td ><code translate="No">force_stop</code></td>
          <td >booleano</td>
          <td >no</td>
          <td >Si el video debe pausarse cuando se alcanza el punto de referencia ( <code translate="No">force_stop</code> Brightcove Player lo ignora y actualmente no hay planes para admitirlo, pero puede pausar el video manualmente en su controlador de eventos de punto de referencia)</td>
        </tr>
      </tbody>
    </table>

    <h3>Notas</h3>

    <ul>
      <li id="note1" ><sup><strong>[1]</strong> </sup> Técnicamente, el punto de referencia está activo hasta que se alcanza el siguiente punto de referencia; por lo tanto, en la matriz de puntos de referencia que puede recuperar de Brightcove Player, verá una <code translate="No">startTime</code> y <code translate="No">endTime</code> también en un <code translate="No">time</code> para el punto de referencia.</li>
    </ul>
  </section>

  <section class="bcls-section">
    <details>
      <summary>
        <h2 id="getCredentials">Obtener credenciales de autenticación</h2>
      </summary>
      <p>Usar el <span translate="No">API de CMS</span> necesitará las credenciales adecuadas.</p>

      <p>La forma más fácil de obtener credenciales en la mayoría de los casos es a través de la sección Autenticación de la API de administrador de Studio (requiere permisos de administrador en su cuenta). Ver <a href="/general/managing-api-authentication-credentials.html">Administrar las credenciales de autenticación de API</a> para detalles. En la mayoría de los casos, probablemente solo desee obtener permisos para todos <span translate="No">API de CMS</span> operación:</p>

      <figure class="bcls-figure"><img class="bcls-image" alt="CMS API Permissions" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/cms-api/cms-permissions.png" />
        <figcaption class="bcls-caption--image">Permisos de la API de CMS</figcaption>
      </figure>

      <p>Si los permisos que necesita no están disponibles en Studio, o si prefiere obtenerlos directamente de la API de OAuth, utilice su elección de <strong>Obtener credenciales de cliente</strong> documentos que se enumeran a continuación. Cualquiera que sea la opción que elija, deberá solicitar los permisos de operación correctos. Lo siguiente se puede usar con cURL o Postman para obtener todos los permisos para la API de CMS:</p>

      <pre class="line-numbers">
          <code class="language-json" translate="No">"operations": [
            "video-cloud/video/all",
            "video-cloud/playlist/all",
            "video-cloud/sharing-relationships/all",
            "video-cloud/notifications/all"
          ]</code></pre>

      <ul>
        <li><a href="/oauth/guides/oauth-create-client-credentials-using-curl.html">OAuth: Obtener credenciales de cliente mediante cURL</a></li>
        <li><a href="/oauth/guides/oauth-create-client-credentials-using-postman.html">OAuth: Obtenga las credenciales del cliente con Postman</a></li>
      </ul>
    </details>
  </section>

  <section class="bcls-section">
    <h2 id="sample_app">Aplicación de muestra</h2>
    Encuentre todo el código asociado con esta muestra en este <a href="https://github.com/BrightcoveLearning/18030-cms-api-sample-add-cue-points">Repositorio de GitHub</a>.

    <p data-height="1200" data-theme-id="34967" data-slug-hash="bvqJEp" data-default-tab="result" data-user="rcrooks1969" data-embed-version="2" data-pen-title="CMS API Sample: Add Cue Points" class="codepen">Ver la pluma <a href="https://codepen.io/team/rcrooks1969/pen/bvqJEp/">Ejemplo de API de CMS: Agregar puntos de referencia</a> por Brightcove Learning Services ( <a href="https://codepen.io/rcrooks1969"> rcrooks1969</a> ) en <a href="https://codepen.io">CodePen</a>.</p>
    <script async src="https://static.codepen.io/assets/embed/ei.js"></script>
  </section>

  <section class="bcls-section">
    <details>
      <summary>
        <h2 id="Using_the_CodePen">Usando el CodePen</h2>
      </summary>

      <ul>
        <li>Alternar la visualización real de la aplicación haciendo clic en el <strong>Resultado</strong> botón.</li>
        <li>Haga clic en el <strong>HTML / CSS / JS</strong> botones para mostrar UNO de los tipos de código.</li>
        <li>Hacer clic <strong>Editar en CodePen</strong> en la esquina superior derecha para bifurcar este CodePen en su propia cuenta.</li>
        <li>Encuentre todo el código asociado con esta muestra en este <a href="https://github.com/BrightcoveLearning/18030-cms-api-sample-add-cue-points">Repositorio de GitHub</a>.</li>
      </ul>
    </details>
  </section>

  <section class="bcls-section">
    <details>
      <summary>
        <h2 id="proxy">Código de proxy</h2>
      </summary>

      <p>Para crear su propia versión de la aplicación de muestra en esta página, debe crear y alojar su propio proxy. (Los proxies utilizados por Brightcove Learning Services solo aceptan solicitudes de dominios de Brightcove). Un proxy de muestra, muy similar al que usamos, pero sin las comprobaciones que bloquean las solicitudes de dominios que no son de Brightcove, se puede encontrar en <a href="https://github.com/BrightcoveLearning/sample-proxy-apps">este repositorio de GitHub</a>. También encontrará instrucciones básicas para usarlo allí, y una guía más elaborada para crear aplicaciones alrededor del proxy en <a href="/getting-started/learning-guide-using-rest-apis.html">Usando las API REST</a>.</p>
    </details>
  </section>

</article>